<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="数据库概述MySQL最初是由“MySQL AB”公司开发的一套关系型数据库管理系统（RDBMS-Relational DataBase Management System）。  MySQL不仅是最流行的开源数据库，而且是业界成长最快的数据库，每天有超过7万次的下载量，其范围从大企业到专有的嵌入应用系统。 MySQL AB是由两个瑞典人和一个芬兰人：David AxMark、Allan Larsso">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习笔记">
<meta property="og:url" content="http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Clover Blog">
<meta property="og:description" content="数据库概述MySQL最初是由“MySQL AB”公司开发的一套关系型数据库管理系统（RDBMS-Relational DataBase Management System）。  MySQL不仅是最流行的开源数据库，而且是业界成长最快的数据库，每天有超过7万次的下载量，其范围从大企业到专有的嵌入应用系统。 MySQL AB是由两个瑞典人和一个芬兰人：David AxMark、Allan Larsso">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-02T09:52:51.000Z">
<meta property="article:modified_time" content="2023-05-26T09:45:32.847Z">
<meta property="article:author" content="Clover You">
<meta property="article:tag" content="学习笔记">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="SQL">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>MySQL学习笔记</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Clover Blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/2022/01/02/JDBC%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/2022/01/02/43%E3%80%81java%E6%B3%A8%E8%A7%A3/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&text=MySQL学习笔记"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&is_video=false&description=MySQL学习笔记"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=MySQL学习笔记&body=Check out this article: http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&name=MySQL学习笔记&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&t=MySQL学习笔记"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E3%80%81DB%E3%80%81DBMS%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BB%96%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">SQL、DB、DBMS分别是什么，他们之间的关系？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">什么是表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">对SQL语句的分类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">MySQL命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.1.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">查看表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.3.</span> <span class="toc-text">查询当前使用的数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8BMySQL%E6%9C%AC%E5%8F%B7"><span class="toc-number">4.4.</span> <span class="toc-text">查看MySQL本号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.5.</span> <span class="toc-text">结束一条语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E8%AF%AD%E5%8F%A5%EF%BC%9A"><span class="toc-number">4.6.</span> <span class="toc-text">查看创建表的语句：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">5.</span> <span class="toc-text">SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%84%9A%E6%9C%AC"><span class="toc-number">5.1.</span> <span class="toc-text">SQL脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">5.2.</span> <span class="toc-text">查看表格中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%88DQL%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">简单的查询语句（DQL）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">5.3.1.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">5.3.2.</span> <span class="toc-text">查询所有字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.</span> <span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#between-and"><span class="toc-number">5.4.1.</span> <span class="toc-text">between and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-null-%E5%92%8C-is-not-null"><span class="toc-number">5.4.2.</span> <span class="toc-text">is null 和 is not null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#or%E5%92%8Cand%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E9%97%AE%E9%A2%98"><span class="toc-number">5.4.3.</span> <span class="toc-text">or和and的优先级问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in"><span class="toc-number">5.4.4.</span> <span class="toc-text">in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-in"><span class="toc-number">5.4.5.</span> <span class="toc-text">not in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like"><span class="toc-number">5.4.6.</span> <span class="toc-text">模糊查询like</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E5%90%8D%E5%AD%97%E5%BD%93%E4%B8%AD%E5%90%AB%E6%9C%89O%E7%9A%84%EF%BC%9F"><span class="toc-number">5.4.6.1.</span> <span class="toc-text">找出名字当中含有O的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E5%90%8D%E5%AD%97%E4%B8%AD%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AF%8D%E6%98%AFA%E7%9A%84%EF%BC%9F"><span class="toc-number">5.4.6.2.</span> <span class="toc-text">找出名字中第二个字母是A的？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">5.5.</span> <span class="toc-text">排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">6.0.1.</span> <span class="toc-text">多行处理函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%A4%84%E7%90%86%E8%A1%8C%E6%95%B0"><span class="toc-number">6.0.2.</span> <span class="toc-text">单行处理行数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.0.3.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">6.0.4.</span> <span class="toc-text">去除重复记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84DQL%E8%AF%AD%E5%8F%A5%E6%80%8E%E4%B9%88%E5%86%99%E4%BB%A5%E5%8F%8A%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">6.0.5.</span> <span class="toc-text">一个完整的DQL语句怎么写以及执行顺序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%9F"><span class="toc-number">7.1.</span> <span class="toc-text">什么是连接查询？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">7.1.1.</span> <span class="toc-text">连接查询的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1"><span class="toc-number">7.1.2.</span> <span class="toc-text">笛卡尔积现象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%A1%A8%E7%9A%84%E5%88%AB%E5%90%8D"><span class="toc-number">7.1.3.</span> <span class="toc-text">关于表的别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%88%AB%E5%90%8D%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84%EF%BC%9F"><span class="toc-number">7.1.3.1.</span> <span class="toc-text">表的别名有什么好处？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1%EF%BC%9F"><span class="toc-number">7.1.4.</span> <span class="toc-text">如何避免笛卡尔积现象？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.</span> <span class="toc-text">内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.1.</span> <span class="toc-text">等值连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL92"><span class="toc-number">7.2.2.</span> <span class="toc-text">SQL92</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99"><span class="toc-number">7.2.3.</span> <span class="toc-text">SQL99</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.4.</span> <span class="toc-text">非等值连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.5.</span> <span class="toc-text">自连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.2.</span> <span class="toc-text">右外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%BC%A0%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.3.3.</span> <span class="toc-text">三张表连接查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9F"><span class="toc-number">8.1.</span> <span class="toc-text">什么是子查询？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.</span> <span class="toc-text">在where语句中使用子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8select%E5%90%8E%E9%9D%A2%E5%B5%8C%E5%A5%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.3.</span> <span class="toc-text">在select后面嵌套子查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#union%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">union的用法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#limit"><span class="toc-number">10.</span> <span class="toc-text">limit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">11.</span> <span class="toc-text">表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EMySQL%E5%BD%93%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%82"><span class="toc-number">11.1.</span> <span class="toc-text">关于MySQL当中常用字段的数据类型。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#char%E5%92%8Cvarchar%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%EF%BC%9F"><span class="toc-number">11.1.1.</span> <span class="toc-text">char和varchar如何选择？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8"><span class="toc-number">11.1.2.</span> <span class="toc-text">建表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%E8%AF%AD%E5%8F%A5%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">11.2.</span> <span class="toc-text">insert语句插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6%E4%BB%A5%E5%8F%8A%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">11.2.1.</span> <span class="toc-text">表的复制以及批量插入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="toc-number">11.2.1.1.</span> <span class="toc-text">表的复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">11.2.1.2.</span> <span class="toc-text">批量插入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">11.3.</span> <span class="toc-text">定义默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">11.4.</span> <span class="toc-text">update 修改数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">11.5.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.</span> <span class="toc-text">表约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F%EF%BC%9F"><span class="toc-number">11.6.1.</span> <span class="toc-text">什么是约束？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.2.</span> <span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.3.</span> <span class="toc-text">唯一性约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.4.</span> <span class="toc-text">主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD"><span class="toc-number">11.6.4.1.</span> <span class="toc-text">主键相关术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">11.6.4.2.</span> <span class="toc-text">主键有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">11.6.4.3.</span> <span class="toc-text">主键的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E5%80%BC%E8%87%AA%E5%A2%9E"><span class="toc-number">11.6.4.4.</span> <span class="toc-text">主键值自增</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.5.</span> <span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E8%83%8C%E6%99%AF"><span class="toc-number">11.6.5.1.</span> <span class="toc-text">业务背景</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.</span> <span class="toc-text">存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.1.</span> <span class="toc-text">什么是存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.2.</span> <span class="toc-text">查看存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.</span> <span class="toc-text">常见的存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyISAM%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.1.</span> <span class="toc-text">MyISAM存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.2.</span> <span class="toc-text">InnoDB存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MEMORY-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.3.</span> <span class="toc-text">MEMORY 存储引擎</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.1.</span> <span class="toc-text">什么是事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86"><span class="toc-number">13.2.</span> <span class="toc-text">事务原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">13.3.</span> <span class="toc-text">事务的四大特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7"><span class="toc-number">13.3.1.</span> <span class="toc-text">事务之间的隔离性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.4.</span> <span class="toc-text">演示事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E8%A1%A8"><span class="toc-number">13.4.1.</span> <span class="toc-text">准备表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA"><span class="toc-number">13.4.2.</span> <span class="toc-text">演示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">14.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">14.1.</span> <span class="toc-text">什么是索引？有什么用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%80%83%E8%99%91%E7%BB%99%E5%AD%97%E6%AE%B5%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="toc-number">14.2.</span> <span class="toc-text">什么时候考虑给字段添加索引？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="toc-number">14.3.</span> <span class="toc-text">添加索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%E5%85%91%E7%8E%B0"><span class="toc-number">14.4.</span> <span class="toc-text">删除索引兑现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">14.5.</span> <span class="toc-text">索引实现原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">14.6.</span> <span class="toc-text">索引的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%A4%B1%E6%95%88%EF%BC%9F"><span class="toc-number">14.7.</span> <span class="toc-text">索引什么时候失效？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">15.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE%EF%BC%9F"><span class="toc-number">15.1.</span> <span class="toc-text">什么是视图？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">15.2.</span> <span class="toc-text">视图的创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">15.3.</span> <span class="toc-text">删除视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">15.4.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">15.5.</span> <span class="toc-text">视图的作用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DBA%E5%91%BD%E4%BB%A4"><span class="toc-number">16.</span> <span class="toc-text">DBA命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">16.1.</span> <span class="toc-text">导出数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">16.2.</span> <span class="toc-text">导入数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">17.</span> <span class="toc-text">数据库三范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F"><span class="toc-number">17.1.</span> <span class="toc-text">什么是设计范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F%E9%83%BD%E6%98%AF%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">17.2.</span> <span class="toc-text">三范式都是哪些？</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        MySQL学习笔记
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Clover You</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2022-01-02T09:52:51.000Z" class="dt-published" itemprop="datePublished">2022-01-02</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/MySQL/">MySQL</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/MySQL/" rel="tag">MySQL</a>, <a class="p-category" href="/tags/SQL/" rel="tag">SQL</a>, <a class="p-category" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="数据库概述"><a href="#数据库概述" class="headerlink" title="数据库概述"></a>数据库概述</h1><p>MySQL最初是由“MySQL AB”公司开发的一套关系型数据库管理系统（RDBMS-Relational DataBase Management System）。</p>
<p> MySQL不仅是最流行的开源数据库，而且是业界成长最快的数据库，每天有超过7万次的下载量，其范围从大企业到专有的嵌入应用系统。</p>
<p>MySQL AB是由两个瑞典人和一个芬兰人：David AxMark、Allan Larsson 和Michael “Monty Widenius”在瑞典举办的。</p>
<p>在2008年初，Sun Microsystems收购了MySQL AB公司。在2009年，Oracle收购了Sun公司，使MySQL并入Oracle的数据库产品线。</p>
<h2 id="SQL、DB、DBMS分别是什么，他们之间的关系？"><a href="#SQL、DB、DBMS分别是什么，他们之间的关系？" class="headerlink" title="SQL、DB、DBMS分别是什么，他们之间的关系？"></a>SQL、DB、DBMS分别是什么，他们之间的关系？</h2><ul>
<li><p>DB<br>DataBase ：数据库，数据库实际上在硬盘上以文件的形式存在</p>
</li>
<li><p>DBMS<br>DataBase Management  System：数据库管理系统，常见的有：MySQL、Oracle、DB2、Sybse、SQLServer…</p>
</li>
<li><p>SQL</p>
<p>结构化查询语言，是一门标准通用的语言。标准的sql适合于所有的数据库产品。SQL属于高级语言。SQL语句在执行的时候，实际上内部也会先进行编译，然后再执行SQL。（SQL语句的编译由DBMS完成）</p>
</li>
</ul>
<p>DBMS负责执行sql语句，通过执行sql语句来操作DB当中的数据。</p>
<p>DBMS &#x3D;&#x3D;(执行)&#x3D;&#x3D;&gt; SQL &#x3D;&#x3D;(操作)&#x3D;&#x3D;&gt; DB</p>
<h1 id="什么是表"><a href="#什么是表" class="headerlink" title="什么是表"></a>什么是表</h1><ul>
<li><p>表：table</p>
<p>是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强。</p>
</li>
<li><p>一个表包括行和列</p>
<ul>
<li>行<br>被称为数据&#x2F;记录（data）</li>
<li>列<br>被称为字段（column）</li>
</ul>
</li>
<li><p>每一个字段应该包括哪些属性？<br>一个字段，应该包括：字段名、数据类型、相关的约束。</p>
</li>
</ul>
<h1 id="对SQL语句的分类"><a href="#对SQL语句的分类" class="headerlink" title="对SQL语句的分类"></a>对SQL语句的分类</h1><ul>
<li><p>DQL（数据查询语言）<br>查询语句，凡是select语句都是DQL</p>
</li>
<li><p>DML（数据操作语言）<br>insert delete update，对表当中的数据进行增删改</p>
</li>
<li><p>DDL（数据定义语言）</p>
<p>create drop alert，对表结构的增删改。</p>
</li>
<li><p>TCL（事务控制语言）<br>commit提交事务，rollback回滚事物</p>
</li>
<li><p>DCL（数据控制语言）<br>grant授权、revoke撤销权限等</p>
</li>
</ul>
<h1 id="MySQL命令"><a href="#MySQL命令" class="headerlink" title="MySQL命令"></a>MySQL命令</h1><ol>
<li><p>登录mysql数据库管理系统<br>dos命令窗口</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p[密码]</span><br></pre></td></tr></table></figure>

<p>在Mac中如果出现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql: [Warning] Using a password on the command line interface can be insecure.</span><br><span class="line">ERROR 2002 (HY000): Can&#x27;t connect to local MySQL server through socket &#x27;/tmp/mysql.sock&#x27; (2)</span><br></pre></td></tr></table></figure>

<p>可能是mysqld服务没启动，在dos命令窗口输入<code>mysqld</code>等待启动即可</p>
</li>
<li><p>查看有哪些数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Database           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ry<span class="operator">-</span>vue             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>这不是SQL语句，而是MySQL的命令</p>
</li>
<li><p>创建属于我们自己的数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database upyou_database;</span><br></pre></td></tr></table></figure>

<p>这个也不是一个sql语句，还是属于MySQL的命令。</p>
<p>此时查看我们当前现有的数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Database           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ry<span class="operator">-</span>vue             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> sys                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> upyou_database     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>upyou_database</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use upyou_database;</span><br></pre></td></tr></table></figure>

<p>这依然不是一个sql语句，这是一个属于mysql的命令。</p>
</li>
<li><p>查看当前使用的数据库中的表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tabels</span><br></pre></td></tr></table></figure>

<p>这个也不是一个sql语句，还是属于MySQL的命令。</p>
<p>由于当前我们没有创建一个表，所以一下结果来源于mysql表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+----------------------------------------------+</span><br><span class="line">| Tables_in_mysql                              |</span><br><span class="line">+----------------------------------------------+</span><br><span class="line">| columns_priv                                 |</span><br><span class="line">| component                                    |</span><br><span class="line">| db                                           |</span><br><span class="line">| default_roles                                |</span><br><span class="line">| engine_cost                                  |</span><br><span class="line">| func                                         |</span><br><span class="line">| general_log                                  |</span><br><span class="line">| global_grants                                |</span><br><span class="line">+----------------------------------------------+</span><br><span class="line">34 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>为刚刚创建的数据库<code>upyou_database</code>初始化数据。</p>
<p>使用mysql的<code>source</code>命令来导入一个sql脚本，如果你有</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.bjpowernode.com/javavideo/111.html?bili">学习数据库脚本下载</a></p>
<p>导入成功后查看当前数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br><span class="line">+--------------------------+</span><br><span class="line">| Tables_in_upyou_database |</span><br><span class="line">+--------------------------+</span><br><span class="line">| DEPT                     |</span><br><span class="line">| EMP                      |</span><br><span class="line">| SALGRADE                 |</span><br><span class="line">+--------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><p>尝试将刚刚创建的<code>upyou_database</code>删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database upyou_database;</span><br></pre></td></tr></table></figure>

<p>查看当前数据库列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| ry-vue             |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h2><p>当前数据库为<code>upyou_database</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------+</span><br><span class="line">| Tables_in_upyou_database |</span><br><span class="line">+--------------------------+</span><br><span class="line">| DEPT                     |	(部门表)</span><br><span class="line">| EMP                      |	(员工表)</span><br><span class="line">| SALGRADE                 |	(工资等级表)</span><br><span class="line">+--------------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>使用<code>desc</code>命令查看表结构，DEPT是一个表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc DEPT</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| DEPTNO | int         | NO   | PRI | NULL    |       |	(部门编号)</span><br><span class="line">| DNAME  | varchar(14) | YES  |     | NULL    |       |	(部门名称)</span><br><span class="line">| LOC    | varchar(13) | YES  |     | NULL    |       |	(部门位置)</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc EMP</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| EMPNO    | int         | NO   | PRI | NULL    |       |	（员工编号）</span><br><span class="line">| ENAME    | varchar(10) | YES  |     | NULL    |       |	（员工姓名）</span><br><span class="line">| JOB      | varchar(9)  | YES  |     | NULL    |       |	（工作岗位）</span><br><span class="line">| MGR      | int         | YES  |     | NULL    |       |	（上级领导编号）</span><br><span class="line">| HIREDATE | date        | YES  |     | NULL    |       |	（入职日期）</span><br><span class="line">| SAL      | double(7,2) | YES  |     | NULL    |       |	（月薪）</span><br><span class="line">| COMM     | double(7,2) | YES  |     | NULL    |       |	（补助）</span><br><span class="line">| DEPTNO   | int         | YES  |     | NULL    |       |	（部门编号）</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc SALGRADE</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-------+------+------+-----+---------+-------+</span><br><span class="line">| Field | Type | Null | Key | Default | Extra |</span><br><span class="line">+-------+------+------+-----+---------+-------+</span><br><span class="line">| GRADE | int  | YES  |     | NULL    |       |	（等级）</span><br><span class="line">| LOSAL | int  | YES  |     | NULL    |       |	（最低薪资）</span><br><span class="line">| HISAL | int  | YES  |     | NULL    |       |	（最高薪资）</span><br><span class="line">+-------+------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="查询当前使用的数据库"><a href="#查询当前使用的数据库" class="headerlink" title="查询当前使用的数据库"></a>查询当前使用的数据库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------------+</span><br><span class="line">| database()     |</span><br><span class="line">+----------------+</span><br><span class="line">| upyou_database |</span><br><span class="line">+----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="查看MySQL本号"><a href="#查看MySQL本号" class="headerlink" title="查看MySQL本号"></a>查看MySQL本号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select version();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-----------+</span><br><span class="line">| version() |</span><br><span class="line">+-----------+</span><br><span class="line">| 8.0.22    |</span><br><span class="line">+-----------+</span><br></pre></td></tr></table></figure>



<h2 id="结束一条语句"><a href="#结束一条语句" class="headerlink" title="结束一条语句"></a>结束一条语句</h2><p>当想结束一条语句时使用<code>\c</code>命令，例如想结束以下语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; selece</span><br><span class="line">    -&gt; *</span><br><span class="line">    -&gt; from</span><br><span class="line">    -&gt; </span><br><span class="line">    -&gt; </span><br><span class="line">    -&gt; </span><br><span class="line">    -&gt; </span><br></pre></td></tr></table></figure>

<p>输入<code>\c</code>后回车即可结束语句。</p>
<h2 id="查看创建表的语句："><a href="#查看创建表的语句：" class="headerlink" title="查看创建表的语句："></a>查看创建表的语句：</h2><p>如果想查看某个表是用哪条语句创建的，可以使用<code>show create table 表名</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table DEPT</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                                                     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> DEPT  <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `DEPT` (</span><br><span class="line">  `DEPTNO` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `DNAME` <span class="type">varchar</span>(<span class="number">14</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `LOC` <span class="type">varchar</span>(<span class="number">13</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`DEPTNO`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure>



<h1 id="SQL语句"><a href="#SQL语句" class="headerlink" title="SQL语句"></a>SQL语句</h1><h2 id="SQL脚本"><a href="#SQL脚本" class="headerlink" title="SQL脚本"></a>SQL脚本</h2><p>以<code>.sql</code>结尾的文件，这样的文件被称为“sql脚本”。什么是sql脚本呢？</p>
<p>当一个文件的拓展名是<code>.sql</code>，并且该文件中编写了大量的sql语句，我们称这样的文件为sql脚本。</p>
<blockquote>
<p>sql脚本中的数据量太大的时候，无法打开，请使用source命令完成初始化。</p>
</blockquote>
<h2 id="查看表格中的数据"><a href="#查看表格中的数据" class="headerlink" title="查看表格中的数据"></a>查看表格中的数据</h2><p>查询某个表中所有的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> DEPT</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="简单的查询语句（DQL）"><a href="#简单的查询语句（DQL）" class="headerlink" title="简单的查询语句（DQL）"></a>简单的查询语句（DQL）</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span>, 字段名<span class="number">2</span>, 字段名<span class="number">3</span>, ... <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<ul>
<li>任何一条sql语句以分号结尾“;”。</li>
<li>sql 语句不区分大小写。</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><ol>
<li><p>查询员工名字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+</span><br><span class="line">| ENAME  |</span><br><span class="line">+--------+</span><br><span class="line">| SMITH  |</span><br><span class="line">| ALLEN  |</span><br><span class="line">| WARD   |</span><br><span class="line">| JONES  |</span><br><span class="line">| MARTIN |</span><br><span class="line">| BLAKE  |</span><br><span class="line">| CLARK  |</span><br><span class="line">| SCOTT  |</span><br><span class="line">| KING   |</span><br><span class="line">| TURNER |</span><br><span class="line">| ADAMS  |</span><br><span class="line">| JAMES  |</span><br><span class="line">| FORD   |</span><br><span class="line">| MILLER |</span><br><span class="line">+--------+</span><br></pre></td></tr></table></figure>


</li>
<li><p>查询员工的年薪</p>
<p>数据库中记录的是月薪，年薪是需要乘12</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, (SAL <span class="operator">*</span> <span class="number">12</span>) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ENAME  | (SAL * 12) |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  |    9600.00 |</span><br><span class="line">| ALLEN  |   19200.00 |</span><br><span class="line">| WARD   |   15000.00 |</span><br><span class="line">| JONES  |   35700.00 |</span><br><span class="line">| MARTIN |   15000.00 |</span><br><span class="line">| BLAKE  |   34200.00 |</span><br><span class="line">| CLARK  |   29400.00 |</span><br><span class="line">| SCOTT  |   36000.00 |</span><br><span class="line">| KING   |   60000.00 |</span><br><span class="line">| TURNER |   18000.00 |</span><br><span class="line">| ADAMS  |   13200.00 |</span><br><span class="line">| JAMES  |   11400.00 |</span><br><span class="line">| FORD   |   36000.00 |</span><br><span class="line">| MILLER |   15600.00 |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure>

<p>如果由于<code>SAL * 12</code>后字段名变为SAL * 12，如需重新给该字段名明，可以使用<code>as</code>关键字命名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, (SAL <span class="operator">*</span> <span class="number">12</span>) <span class="keyword">as</span> SAL <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+</span><br><span class="line">| ENAMW  | SAL      |</span><br><span class="line">+--------+----------+</span><br><span class="line">| SMITH  |  <span class="number">9600.00</span> |</span><br><span class="line">| ALLEN  | <span class="number">19200.00</span> |</span><br><span class="line">| WARD   | <span class="number">15000.00</span> |</span><br><span class="line">| JONES  | <span class="number">35700.00</span> |</span><br><span class="line">| MARTIN | <span class="number">15000.00</span> |</span><br><span class="line">| BLAKE  | <span class="number">34200.00</span> |</span><br><span class="line">| CLARK  | <span class="number">29400.00</span> |</span><br><span class="line">| SCOTT  | <span class="number">36000.00</span> |</span><br><span class="line">| KING   | <span class="number">60000.00</span> |</span><br><span class="line">| TURNER | <span class="number">18000.00</span> |</span><br><span class="line">| ADAMS  | <span class="number">13200.00</span> |</span><br><span class="line">| JAMES  | <span class="number">11400.00</span> |</span><br><span class="line">| FORD   | <span class="number">36000.00</span> |</span><br><span class="line">| MILLER | <span class="number">15600.00</span> |</span><br><span class="line">+--------+----------+</span><br></pre></td></tr></table></figure></li>
</ol>
<p>通过以上可以看出来，在<code>sql</code>中字段可以参与数学运算。</p>
<p>如果字段想显示中文，则需要使用单引号包裹（标准sql语句中要求字符串使用单引号括起来。）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">as</span> <span class="string">&#x27;员工名&#x27;</span>, SAL <span class="operator">*</span> <span class="number">12</span> <span class="keyword">as</span> <span class="string">&#x27;年薪&#x27;</span> <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+-----------+----------+</span><br><span class="line">| 员工名    | 年薪     |</span><br><span class="line">+-----------+----------+</span><br><span class="line">| SMITH     |  9600.00 |</span><br><span class="line">| ALLEN     | 19200.00 |</span><br><span class="line">| WARD      | 15000.00 |</span><br><span class="line">| JONES     | 35700.00 |</span><br><span class="line">| MARTIN    | 15000.00 |</span><br><span class="line">| BLAKE     | 34200.00 |</span><br><span class="line">| CLARK     | 29400.00 |</span><br><span class="line">| SCOTT     | 36000.00 |</span><br><span class="line">| KING      | 60000.00 |</span><br><span class="line">| TURNER    | 18000.00 |</span><br><span class="line">| ADAMS     | 13200.00 |</span><br><span class="line">| JAMES     | 11400.00 |</span><br><span class="line">| FORD      | 36000.00 |</span><br><span class="line">| MILLER    | 15600.00 |</span><br><span class="line">+-----------+----------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>在SQL Server、Oracle中仅支持并必须使用单引号将中文包裹，而MySQL可以使用双引号和单引号，所以以后写SQL语句不要出现双引号，如果出现双引号意味着这个SQL脚本只能在MySQL中使用。</strong></p>
<h3 id="查询所有字段"><a href="#查询所有字段" class="headerlink" title="查询所有字段"></a>查询所有字段</h3><p>在sql中可以使用<code>*</code>代表所有字段，如果需要查询所有字段，可以使用<code>*</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  <span class="number">7369</span> | SMITH  | CLERK     | <span class="number">7902</span> | <span class="number">1980</span>-<span class="number">12</span>-<span class="number">17</span> |  <span class="number">800.00</span> |    NULL |     <span class="number">20</span> |</span><br><span class="line">|  <span class="number">7499</span> | ALLEN  | SALESMAN  | <span class="number">7698</span> | <span class="number">1981</span>-<span class="number">02</span>-<span class="number">20</span> | <span class="number">1600.00</span> |  <span class="number">300.00</span> |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7521</span> | WARD   | SALESMAN  | <span class="number">7698</span> | <span class="number">1981</span>-<span class="number">02</span>-<span class="number">22</span> | <span class="number">1250.00</span> |  <span class="number">500.00</span> |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7566</span> | JONES  | MANAGER   | <span class="number">7839</span> | <span class="number">1981</span>-<span class="number">04</span>-<span class="number">02</span> | <span class="number">2975.00</span> |    NULL |     <span class="number">20</span> |</span><br><span class="line">|  <span class="number">7654</span> | MARTIN | SALESMAN  | <span class="number">7698</span> | <span class="number">1981</span>-09-<span class="number">28</span> | <span class="number">1250.00</span> | <span class="number">1400.00</span> |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7698</span> | BLAKE  | MANAGER   | <span class="number">7839</span> | <span class="number">1981</span>-<span class="number">05</span>-<span class="number">01</span> | <span class="number">2850.00</span> |    NULL |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7782</span> | CLARK  | MANAGER   | <span class="number">7839</span> | <span class="number">1981</span>-<span class="number">06</span>-09 | <span class="number">2450.00</span> |    NULL |     <span class="number">10</span> |</span><br><span class="line">|  <span class="number">7788</span> | SCOTT  | ANALYST   | <span class="number">7566</span> | <span class="number">1987</span>-<span class="number">04</span>-<span class="number">19</span> | <span class="number">3000.00</span> |    NULL |     <span class="number">20</span> |</span><br><span class="line">|  <span class="number">7839</span> | KING   | PRESIDENT | NULL | <span class="number">1981</span>-<span class="number">11</span>-<span class="number">17</span> | <span class="number">5000.00</span> |    NULL |     <span class="number">10</span> |</span><br><span class="line">|  <span class="number">7844</span> | TURNER | SALESMAN  | <span class="number">7698</span> | <span class="number">1981</span>-09-08 | <span class="number">1500.00</span> |    <span class="number">0.00</span> |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7876</span> | ADAMS  | CLERK     | <span class="number">7788</span> | <span class="number">1987</span>-<span class="number">05</span>-<span class="number">23</span> | <span class="number">1100.00</span> |    NULL |     <span class="number">20</span> |</span><br><span class="line">|  <span class="number">7900</span> | JAMES  | CLERK     | <span class="number">7698</span> | <span class="number">1981</span>-<span class="number">12</span>-<span class="number">03</span> |  <span class="number">950.00</span> |    NULL |     <span class="number">30</span> |</span><br><span class="line">|  <span class="number">7902</span> | FORD   | ANALYST   | <span class="number">7566</span> | <span class="number">1981</span>-<span class="number">12</span>-<span class="number">03</span> | <span class="number">3000.00</span> |    NULL |     <span class="number">20</span> |</span><br><span class="line">|  <span class="number">7934</span> | MILLER | CLERK     | <span class="number">7782</span> | <span class="number">1982</span>-<span class="number">01</span>-<span class="number">23</span> | <span class="number">1300.00</span> |    NULL |     <span class="number">10</span> |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line"><span class="number">14</span> rows in <span class="title function_">set</span> <span class="params">(<span class="number">0.00</span> sec)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>不推荐在线上项目中使用，因为这会折扣一部分效率。</p>
</blockquote>
<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段, 字段, ... <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>执行顺序：from -&gt; where -&gt; select</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt; 或 !&#x3D;</td>
<td>不等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>小于等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>大于等于</td>
</tr>
<tr>
<td>between…and…</td>
<td>两个值之间，等同于 <code>&gt;= and &lt;=</code></td>
</tr>
<tr>
<td>is null</td>
<td>为null（is not null 不为空）</td>
</tr>
<tr>
<td>and</td>
<td>并且</td>
</tr>
<tr>
<td>or</td>
<td>或者</td>
</tr>
<tr>
<td>in</td>
<td>包含，相当于多个or（not in不在这个范围中）</td>
</tr>
<tr>
<td>not</td>
<td>not 可以取非，主要用在is或in中</td>
</tr>
<tr>
<td>like</td>
<td>like称为模糊查询，支持%或下划线匹配</td>
</tr>
</tbody></table>
<ol>
<li><p>查询工资等于5000的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">=</span> <span class="number">5000</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+</span><br><span class="line">| ENAME |</span><br><span class="line">+-------+</span><br><span class="line">| KING  |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询SMITH的工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+</span><br><span class="line">| ENAME | SAL    |</span><br><span class="line">+-------+--------+</span><br><span class="line">| SMITH | 800.00 |</span><br><span class="line">+-------+--------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出工资高于3000的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+---------+</span><br><span class="line">| ENAME | SAL     |</span><br><span class="line">+-------+---------+</span><br><span class="line">| KING  | 5000.00 |</span><br><span class="line">+-------+---------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出工资不等于3000的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&lt;&gt;</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| SMITH  |  800.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出工资在1100和3000之间的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;=</span> <span class="number">1100</span> <span class="keyword">and</span> SAL <span class="operator">&lt;=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |N</span><br><span class="line">+--------+---------+</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="keyword">between</span> <span class="number">1100</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="between-and"><a href="#between-and" class="headerlink" title="between and"></a>between and</h3><p>between … and …是闭区间查询语法，执行结果与<code>SAL &gt;= 1100 and SAL &lt;= 3000</code>一致。<code>between and</code>在使用的时候必须左小右大。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="keyword">between</span> <span class="number">1100</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>

<p><code>between and</code> 除了用在数字方面还可以用在字符串方面。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME <span class="keyword">between</span> <span class="string">&#x27;A&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;C&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-------+</span><br><span class="line">| ENAME |</span><br><span class="line">+-------+</span><br><span class="line">| ALLEN |</span><br><span class="line">| BLAKE |</span><br><span class="line">| ADAMS |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure>

<p>在数据库中，有这么一条数据，但我们却没有查出来，因为<code>between and</code>在字符串中是左闭右开的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+</span><br><span class="line">| ENAME |</span><br><span class="line">+-------+</span><br><span class="line">| CLARK |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure>



<h3 id="is-null-和-is-not-null"><a href="#is-null-和-is-not-null" class="headerlink" title="is null 和 is not null"></a>is null 和 is not null</h3><p>例子</p>
<ol>
<li><p>找出哪些人津贴为null？在数据库当中<strong>NULL</strong>不是一个值，代表什么也没有，为空。空不是一个值，不能使用等号衡量，必须使用<code>is null</code> 或者<code>is not null</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, COMM <span class="keyword">from</span> EMP <span class="keyword">where</span> COMM <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+--------+------+</span><br><span class="line">| ENAME  | COMM |</span><br><span class="line">+--------+------+</span><br><span class="line">| SMITH  | NULL |</span><br><span class="line">| JONES  | NULL |</span><br><span class="line">| BLAKE  | NULL |</span><br><span class="line">| CLARK  | NULL |</span><br><span class="line">| SCOTT  | NULL |</span><br><span class="line">| KING   | NULL |</span><br><span class="line">| TURNER | 0.00 |</span><br><span class="line">| ADAMS  | NULL |</span><br><span class="line">| JAMES  | NULL |</span><br><span class="line">| FORD   | NULL |</span><br><span class="line">| MILLER | NULL |</span><br><span class="line">+--------+------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出哪些人津贴不为NULL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, COMM <span class="keyword">from</span> EMP <span class="keyword">where</span> COMM <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | COMM    |</span><br><span class="line">+--------+---------+</span><br><span class="line">| ALLEN  |  300.00 |</span><br><span class="line">| WARD   |  500.00 |</span><br><span class="line">| MARTIN | 1400.00 |</span><br><span class="line">| TURNER |    0.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出哪些人没有津贴？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, COMM <span class="keyword">from</span> EMP <span class="keyword">where</span> COMM <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> COMM <span class="operator">=</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">+--------+------+</span><br><span class="line">| ENAME  | COMM |</span><br><span class="line">+--------+------+</span><br><span class="line">| SMITH  | NULL |</span><br><span class="line">| JONES  | NULL |</span><br><span class="line">| BLAKE  | NULL |</span><br><span class="line">| CLARK  | NULL |</span><br><span class="line">| SCOTT  | NULL |</span><br><span class="line">| KING   | NULL |</span><br><span class="line">| TURNER | 0.00 |</span><br><span class="line">| ADAMS  | NULL |</span><br><span class="line">| JAMES  | NULL |</span><br><span class="line">| FORD   | NULL |</span><br><span class="line">| MILLER | NULL |</span><br><span class="line">+--------+------+</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="or和and的优先级问题"><a href="#or和and的优先级问题" class="headerlink" title="or和and的优先级问题"></a>or和and的优先级问题</h3><p>找出薪资大于1000并且部门编号是20或30部门的员工。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL, DEPTNO <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">and</span> DEPTNO <span class="operator">=</span> <span class="number">20</span> <span class="keyword">or</span> DEPTNO <span class="operator">=</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+--------+</span><br><span class="line">| ENAME  | SAL     | DEPTNO |</span><br><span class="line">+--------+---------+--------+</span><br><span class="line">| ALLEN  | <span class="number">1600.00</span> |     <span class="number">30</span> |</span><br><span class="line">| WARD   | <span class="number">1250.00</span> |     <span class="number">30</span> |</span><br><span class="line">| JONES  | <span class="number">2975.00</span> |     <span class="number">20</span> |</span><br><span class="line">| MARTIN | <span class="number">1250.00</span> |     <span class="number">30</span> |</span><br><span class="line">| BLAKE  | <span class="number">2850.00</span> |     <span class="number">30</span> |</span><br><span class="line">| SCOTT  | <span class="number">3000.00</span> |     <span class="number">20</span> |</span><br><span class="line">| TURNER | <span class="number">1500.00</span> |     <span class="number">30</span> |</span><br><span class="line">| ADAMS  | <span class="number">1100.00</span> |     <span class="number">20</span> |</span><br><span class="line">| JAMES  |  <span class="number">950.00</span> |     <span class="number">30</span> |</span><br><span class="line">| FORD   | <span class="number">3000.00</span> |     <span class="number">20</span> |</span><br><span class="line">+--------+---------+--------+</span><br></pre></td></tr></table></figure>

<p>以上例子在and和or联合使用时，and的优先级比较高，and会将左右两边的条件联合使用，再判判断or，所以需要使用小括号将or语句括起来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL, DEPTNO <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;</span> <span class="number">1000</span> <span class="keyword">and</span> (DEPTNO <span class="operator">=</span> <span class="number">20</span> <span class="keyword">or</span> DEPTNO <span class="operator">=</span> <span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当运算符的优先级不确定的时候，添加小括号。</p>
</blockquote>
<h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><p>in等同于or：找出工作岗位是MANAGER和SALESMAN的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">or</span> JOB <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+</span><br><span class="line">| ENAME  | JOB      |</span><br><span class="line">+--------+----------+</span><br><span class="line">| ALLEN  | SALESMAN |</span><br><span class="line">| WARD   | SALESMAN |</span><br><span class="line">| JONES  | MANAGER  |</span><br><span class="line">| MARTIN | SALESMAN |</span><br><span class="line">| BLAKE  | MANAGER  |</span><br><span class="line">| CLARK  | MANAGER  |</span><br><span class="line">| TURNER | SALESMAN |</span><br><span class="line">+--------+----------+</span><br></pre></td></tr></table></figure>

<p>在以上例子中，<code>JOB = xxx or JOB = xxx</code>这样的语句可以使用in简化</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB <span class="keyword">in</span> (<span class="string">&#x27;MANAGER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+</span><br><span class="line">| ENAME  | JOB      |</span><br><span class="line">+--------+----------+</span><br><span class="line">| ALLEN  | SALESMAN |</span><br><span class="line">| WARD   | SALESMAN |</span><br><span class="line">| JONES  | MANAGER  |</span><br><span class="line">| MARTIN | SALESMAN |</span><br><span class="line">| BLAKE  | MANAGER  |</span><br><span class="line">| CLARK  | MANAGER  |</span><br><span class="line">| TURNER | SALESMAN |</span><br><span class="line">+--------+----------+</span><br></pre></td></tr></table></figure>



<h3 id="not-in"><a href="#not-in" class="headerlink" title="not in"></a>not in</h3><p>not in：不在这几个值当中。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">&#x27;MANAGER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+--------+-----------+</span><br><span class="line">| ENAME  | JOB       |</span><br><span class="line">+--------+-----------+</span><br><span class="line">| SMITH  | CLERK     |</span><br><span class="line">| SCOTT  | ANALYST   |</span><br><span class="line">| KING   | PRESIDENT |</span><br><span class="line">| ADAMS  | CLERK     |</span><br><span class="line">| JAMES  | CLERK     |</span><br><span class="line">| FORD   | ANALYST   |</span><br><span class="line">| MILLER | CLERK     |</span><br><span class="line">+--------+-----------+</span><br></pre></td></tr></table></figure>

<p>等价于</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB <span class="operator">!=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">and</span> JOB <span class="operator">!=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h3 id="模糊查询like"><a href="#模糊查询like" class="headerlink" title="模糊查询like"></a>模糊查询like</h3><p>在模糊查询当中，必须掌握两个特殊的符号，一个是“%”，一个是“_”，“%”代表的是任意多个字符，“_”代表任意1个字符。如果需要找的是已””%””或者”_”，需要使用转义字符转义。</p>
<h4 id="找出名字当中含有O的？"><a href="#找出名字当中含有O的？" class="headerlink" title="找出名字当中含有O的？"></a>找出名字当中含有O的？</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME <span class="keyword">like</span> <span class="string">&#x27;%O%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-------+</span><br><span class="line">| ENAME |</span><br><span class="line">+-------+</span><br><span class="line">| JONES |</span><br><span class="line">| SCOTT |</span><br><span class="line">| FORD  |</span><br><span class="line">+-------+</span><br></pre></td></tr></table></figure>



<h4 id="找出名字中第二个字母是A的？"><a href="#找出名字中第二个字母是A的？" class="headerlink" title="找出名字中第二个字母是A的？"></a>找出名字中第二个字母是A的？</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="keyword">from</span> EMP <span class="keyword">where</span> ENAME <span class="keyword">like</span> <span class="string">&#x27;_A%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+--------+</span><br><span class="line">| ENAME  |</span><br><span class="line">+--------+</span><br><span class="line">| WARD   |</span><br><span class="line">| MARTIN |</span><br><span class="line">| JAMES  |</span><br><span class="line">+--------+</span><br></pre></td></tr></table></figure>



<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><ol>
<li><p>按照工资升序排序，找出员工名和薪资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| SMITH  |  800.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">+--------+---------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>order by</code>默认就是升序排序。怎么指定升序或者降序呢？ <code>asc</code> 表示升序，<code>desc</code> 表示降序。</p>
</li>
<li><p>按照工资降序排序，找出员工名和薪资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| SMITH  |  800.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>按照工资的降序排列，当工资相同的时候再按照名字的升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span>, ENAME <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+</span><br><span class="line">| ENAME  | SAL     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| SMITH  |  800.00 |</span><br><span class="line">+--------+---------+</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 越来靠前的字段越能起到主导作用。只有当前面的字段无法完成排序的时候，才会启用后面的字段。</p>
</blockquote>
</li>
<li><p>找出工作岗位是SALESMAN的员工，并且要求按照薪资的降序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> JOB <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> SAL <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+---------+</span><br><span class="line">| ENAME  | JOB      | SAL     |</span><br><span class="line">+--------+----------+---------+</span><br><span class="line">| ALLEN  | SALESMAN | 1600.00 |</span><br><span class="line">| TURNER | SALESMAN | 1500.00 |</span><br><span class="line">| WARD   | SALESMAN | 1250.00 |</span><br><span class="line">| MARTIN | SALESMAN | 1250.00 |</span><br><span class="line">+--------+----------+---------+</span><br></pre></td></tr></table></figure>



<blockquote>
<p>无论何种排序，只有在结果查询出来时才能进行排序。也就是说order by是最后执行的。</p>
</blockquote>
</li>
</ol>
<h1 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h1><h3 id="多行处理函数"><a href="#多行处理函数" class="headerlink" title="多行处理函数"></a>多行处理函数</h3><table>
<thead>
<tr>
<th>函数名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>计数</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
<tr>
<td>avg</td>
<td>平均值</td>
</tr>
<tr>
<td>max</td>
<td>最大值</td>
</tr>
<tr>
<td>min</td>
<td>最小值</td>
</tr>
</tbody></table>
<blockquote>
<p>所有的分组函数都是对某一组数据进行操作</p>
</blockquote>
<ol>
<li><p>找出员工工资总和</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(SAL) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| sum(SAL) |</span><br><span class="line">+----------+</span><br><span class="line">| 29025.00 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出最高工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| max(SAL) |</span><br><span class="line">+----------+</span><br><span class="line">|  5000.00 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出最低工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(SAL) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| min(SAL) |</span><br><span class="line">+----------+</span><br><span class="line">|   800.00 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(SAL) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------------+</span><br><span class="line">| avg(SAL)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出总人数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ENAME) <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+--------------+</span><br><span class="line">| count(ENAME) |</span><br><span class="line">+--------------+</span><br><span class="line">|           14 |</span><br><span class="line">+--------------+</span><br></pre></td></tr></table></figure>

<p>count(*)和count(具体的某个字段)的区别是：count(*)查询的是总的条数，而count(字段)查询的是某个字段不为NULL的数据条数。</p>
</li>
</ol>
<blockquote>
<p>分组函数一共5个，分组函数还有另一个名字：<strong>多行处理函数</strong>。</p>
<p>多行处理函数的特点是：输入多行，输出一行。分组函数自动忽略NULL</p>
</blockquote>
<h3 id="单行处理行数"><a href="#单行处理行数" class="headerlink" title="单行处理行数"></a>单行处理行数</h3><p>单行处理函数是：输入行，输出一行。</p>
<blockquote>
<p>只要表达式中参与运算的成员有一个是NULL，无论式子怎么列，结果都为NULL（任何数据库）</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ifnull</td>
<td>空处理函数（ifnull(可能为NULL的数据，被当做什么处理)）</td>
</tr>
</tbody></table>
<ol>
<li><p>计算每个员工的年薪</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, (SAL <span class="operator">+</span> ifnull(COMM, <span class="number">0</span>)) <span class="operator">*</span> <span class="number">12</span> <span class="keyword">as</span> yearsal <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+</span><br><span class="line">| ENAME  | yearsal  |</span><br><span class="line">+--------+----------+</span><br><span class="line">| SMITH  |  9600.00 |</span><br><span class="line">| ALLEN  | 22800.00 |</span><br><span class="line">| WARD   | 21000.00 |</span><br><span class="line">| JONES  | 35700.00 |</span><br><span class="line">| MARTIN | 31800.00 |</span><br><span class="line">| BLAKE  | 34200.00 |</span><br><span class="line">| CLARK  | 29400.00 |</span><br><span class="line">| SCOTT  | 36000.00 |</span><br><span class="line">| KING   | 60000.00 |</span><br><span class="line">| TURNER | 18000.00 |</span><br><span class="line">| ADAMS  | 13200.00 |</span><br><span class="line">| JAMES  | 11400.00 |</span><br><span class="line">| FORD   | 36000.00 |</span><br><span class="line">| MILLER | 15600.00 |</span><br><span class="line">+--------+----------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出工资高于平均工资的员工？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, SAL <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;</span> <span class="built_in">avg</span>(SAL);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1111 (HY000): Invalid use of group function</span><br></pre></td></tr></table></figure>

<blockquote>
<p>SQL语句当中有一个语法规则，分组函数不可直接使用在where子句中。因为group by是在where后执行，而分组函数是在group by后执行。</p>
</blockquote>
<p><strong>下面有</strong></p>
</li>
</ol>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>group</td>
<td>按照某个字段或者某些字段进行分组。</td>
</tr>
<tr>
<td>having</td>
<td>对分组之后的数据进行再次过滤。</td>
</tr>
</tbody></table>
<blockquote>
<p>分组函数一般都会和group by联合使用。这也是为什么它被称为分组函数的原因。并且任何一个分组函数（count sum avg max min）都是在group by语句执行结束之后才会执行的。当一条sql语句没有group by的话，整张表的数据会自成一组。</p>
</blockquote>
<ol>
<li><p>找出每个工作岗位的最高薪资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> JOB, <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> JOB;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------+---------+</span><br><span class="line">| JOB       | MAXSAL  |</span><br><span class="line">+-----------+---------+</span><br><span class="line">| CLERK     | 1300.00 |</span><br><span class="line">| SALESMAN  | 1600.00 |</span><br><span class="line">| MANAGER   | 2975.00 |</span><br><span class="line">| ANALYST   | 3000.00 |</span><br><span class="line">| PRESIDENT | 5000.00 |</span><br><span class="line">+-----------+---------+</span><br></pre></td></tr></table></figure>

<p>执行顺序：from -&gt; group by -&gt; select<br><strong>当一条sql语句出现group by语句时，select语句只能出现分组语句以及参与分组字段，别的都不能出现。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, JOB, <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> JOB;</span><br></pre></td></tr></table></figure>

<p>以上语句在低版本<strong>MySQL</strong>可能不会出现以上错误并可查询出结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;upyou_database.EMP.ENAME&#x27; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询每个工作岗位的平均工资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> JOB, <span class="built_in">avg</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> JOB;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------+-------------+</span><br><span class="line">| JOB       | avg(SAL)    |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| CLERK     | 1037.500000 |</span><br><span class="line">| SALESMAN  | 1400.000000 |</span><br><span class="line">| MANAGER   | 2758.333333 |</span><br><span class="line">| ANALYST   | 3000.000000 |</span><br><span class="line">| PRESIDENT | 5000.000000 |</span><br><span class="line">+-----------+-------------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出不同部门不同工作岗位的最高工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> DEPTNO, JOB, <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> DEPTNI, JOB;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------+-----------+----------+</span><br><span class="line">| DEPTNO | JOB       | max(SAL) |</span><br><span class="line">+--------+-----------+----------+</span><br><span class="line">|     20 | CLERK     |  1100.00 |</span><br><span class="line">|     30 | SALESMAN  |  1600.00 |</span><br><span class="line">|     20 | MANAGER   |  2975.00 |</span><br><span class="line">|     30 | MANAGER   |  2850.00 |</span><br><span class="line">|     10 | MANAGER   |  2450.00 |</span><br><span class="line">|     20 | ANALYST   |  3000.00 |</span><br><span class="line">|     10 | PRESIDENT |  5000.00 |</span><br><span class="line">|     30 | CLERK     |   950.00 |</span><br><span class="line">|     10 | CLERK     |  1300.00 |</span><br><span class="line">+--------+-----------+----------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出每个部门的最高薪资，要求显示薪资大于2900的数据。</p>
<ol>
<li><p>第一步，找出每个部门的最高薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> DEPTNO;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| max(SAL) |</span><br><span class="line">+----------+</span><br><span class="line">|  3000.00 |</span><br><span class="line">|  2850.00 |</span><br><span class="line">|  5000.00 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure>


</li>
<li><p>找出薪资大于2900的员工信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> DEPTNO <span class="keyword">having</span> <span class="built_in">max</span>(SAL) <span class="operator">&gt;</span> <span class="number">2900</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| max(SAL) |</span><br><span class="line">+----------+</span><br><span class="line">|  3000.00 |</span><br><span class="line">|  5000.00 |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure>

<p>以上使用<code>having</code>这种方式效率较低，可以使用<code>where</code>先过滤掉低于2900的数据后再分组。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">where</span> SAL <span class="operator">&gt;</span> <span class="number">2900</span> <span class="keyword">group</span> <span class="keyword">by</span> DEPTNO;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>找出每个部门的平均薪资，要求显示薪资大于2000的数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(SAL) <span class="keyword">from</span> EMP <span class="keyword">group</span> <span class="keyword">by</span> DEPTNO <span class="keyword">having</span> svg(SAL) <span class="operator">&gt;</span> <span class="number">2000</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="去除重复记录"><a href="#去除重复记录" class="headerlink" title="去除重复记录"></a>去除重复记录</h3><p>如果查询emp表的JOB字段，会出现很多没必要的重复数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> JOB <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+-----------+</span><br><span class="line">| job       |</span><br><span class="line">+-----------+</span><br><span class="line">| CLERK     |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| ANALYST   |</span><br><span class="line">| PRESIDENT |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| CLERK     |</span><br><span class="line">| CLERK     |</span><br><span class="line">| ANALYST   |</span><br><span class="line">| CLERK     |</span><br><span class="line">+-----------+</span><br></pre></td></tr></table></figure>

<p>如果不需要重复数据可以使用<code>distinct</code>关键字去除重复数据(需要去重复的字段前使用)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> JOB <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------+</span><br><span class="line">| JOB       |</span><br><span class="line">+-----------+</span><br><span class="line">| CLERK     |</span><br><span class="line">| SALESMAN  |</span><br><span class="line">| MANAGER   |</span><br><span class="line">| ANALYST   |</span><br><span class="line">| PRESIDENT |</span><br><span class="line">+-----------+</span><br></pre></td></tr></table></figure>

<p>以下的SQL语句是错误的，没有这种语法机制</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, <span class="keyword">distinct</span> JOB <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;distinct job from emp&#x27; at line 1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>distinct字段只能出现在所有字段的最前面。distinct后面的所有字段联合起来去重。<br>select distinct JOB, ENAME from EMP;</p>
</blockquote>
<h3 id="一个完整的DQL语句怎么写以及执行顺序"><a href="#一个完整的DQL语句怎么写以及执行顺序" class="headerlink" title="一个完整的DQL语句怎么写以及执行顺序"></a>一个完整的DQL语句怎么写以及执行顺序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 					<span class="number">5</span></span><br><span class="line">	... </span><br><span class="line"><span class="keyword">from</span> 						<span class="number">1</span></span><br><span class="line">	... </span><br><span class="line"><span class="keyword">where</span> 					<span class="number">2</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 				<span class="number">3</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">having</span>					<span class="number">4</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span>				<span class="number">6</span></span><br></pre></td></tr></table></figure>









<h1 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h1><h2 id="什么是连接查询？"><a href="#什么是连接查询？" class="headerlink" title="什么是连接查询？"></a>什么是连接查询？</h2><p>在实际开发中，大部分情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。在实际开发中，一个业务都会对应多张表，比如：学生和班级：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stuno		stuname		classno								classname</span><br><span class="line">---------------------------------------------------------------</span><br><span class="line">1					zs				1					北京大兴区亦庄经济开发区第二中学高三1班</span><br><span class="line">2					ls				1					北京大兴区亦庄经济开发区第二中学高三1班</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的<strong>冗余</strong>。</p>
<h3 id="连接查询的分类"><a href="#连接查询的分类" class="headerlink" title="连接查询的分类"></a>连接查询的分类</h3><ol>
<li><p>根据语法出现的年代来划分的话，包括：</p>
<ul>
<li><p>SQL92</p>
</li>
<li><p>SQL99（比较新的语法）</p>
</li>
</ul>
</li>
<li><p>根据表的连接方式来划分，包括：</p>
<ul>
<li>内连接<ul>
<li>等值连接</li>
<li>非等值连接<br><code>between and</code></li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外连接</li>
<li>右外连接</li>
</ul>
</li>
<li>全连接</li>
</ul>
</li>
</ol>
<h3 id="笛卡尔积现象"><a href="#笛卡尔积现象" class="headerlink" title="笛卡尔积现象"></a>笛卡尔积现象</h3><p>在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）</p>
<ol>
<li><p>找出每一个员工的部门名称，要求显示员工名和部门名称。<br>EMP表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, DEPTNO <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| ENAME  | DEPTNO |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  |     20 |</span><br><span class="line">| ALLEN  |     30 |</span><br><span class="line">| WARD   |     30 |</span><br><span class="line">| JONES  |     20 |</span><br><span class="line">| MARTIN |     30 |</span><br><span class="line">| BLAKE  |     30 |</span><br><span class="line">| CLARK  |     10 |</span><br><span class="line">| SCOTT  |     20 |</span><br><span class="line">| KING   |     10 |</span><br><span class="line">| TURNER |     30 |</span><br><span class="line">| ADAMS  |     20 |</span><br><span class="line">| JAMES  |     30 |</span><br><span class="line">| FORD   |     20 |</span><br><span class="line">| MILLER |     10 |</span><br><span class="line">+--------+--------+</span><br></pre></td></tr></table></figure>

<p>DEPT表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> DEPT;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br></pre></td></tr></table></figure>

<p>通过from查询多张表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME, DNAME <span class="keyword">from</span> EMP, DEPT;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| SMITH  | SALES      |</span><br><span class="line">| SMITH  | OPERATIONS |</span><br><span class="line">| ALLEN  | ACCOUNTING |</span><br><span class="line">| ALLEN  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| ALLEN  | OPERATIONS |</span><br><span class="line">| WARD   | ACCOUNTING |</span><br><span class="line">| WARD   | RESEARCH   |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| WARD   | OPERATIONS |</span><br><span class="line">| JONES  | ACCOUNTING |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">|...									|</span><br><span class="line">+--------+------------+</span><br><span class="line">56 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>以上sql语句没有过滤条件，意味着EMP中的每一项都可以和DEPT匹配。</p>
<blockquote>
<p>如果两张表连接的话如果没有任何条件限制，最终的查询结果条数是两张表记录条数的乘积。这种现象被称为笛卡尔乘积现象。</p>
</blockquote>
</li>
</ol>
<h3 id="关于表的别名"><a href="#关于表的别名" class="headerlink" title="关于表的别名"></a>关于表的别名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME, D.DNAME <span class="keyword">from</span> EMP E, DEPT D;</span><br></pre></td></tr></table></figure>

<h4 id="表的别名有什么好处？"><a href="#表的别名有什么好处？" class="headerlink" title="表的别名有什么好处？"></a>表的别名有什么好处？</h4><ol>
<li>执行效率高。</li>
<li>可读性好</li>
</ol>
<h3 id="如何避免笛卡尔积现象？"><a href="#如何避免笛卡尔积现象？" class="headerlink" title="如何避免笛卡尔积现象？"></a>如何避免笛卡尔积现象？</h3><p>若想要避免笛卡尔积现象，当然是加条件进行过滤。</p>
<p>那么避免了笛卡尔积现象，会减少记录的匹配次数吗？不会，匹配的次数还是两张表记录条数的乘积，只不过显示的是有效记录。</p>
<ol>
<li><p>找出每一个员工的部门名称，要求显示员工名和部门名称。<br>EMP表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">		e.ename, d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">		emp e, dept d</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">		d.deptno <span class="operator">=</span> e.deptno;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">+--------+------------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>以上SQL语句为SQL92的写法，以后不用。</p>
</blockquote>
<h2 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h2><h3 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h3><p>等值连接最大的特点是<strong>条件是等量关系</strong></p>
<ol>
<li><p>查询每个员工的部门名称，要求显示员工名和部门名。</p>
<h3 id="SQL92"><a href="#SQL92" class="headerlink" title="SQL92"></a>SQL92</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME, D.DNAME <span class="keyword">from</span> EMP E, DEPT D <span class="keyword">where</span> E.DEPTNO <span class="operator">=</span> D.DEPTNO; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ENAME  | DNAME      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">+--------+------------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="SQL99"><a href="#SQL99" class="headerlink" title="SQL99"></a>SQL99</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME, D.DNAME <span class="keyword">from</span> EMP E <span class="keyword">inner</span> <span class="keyword">join</span> DEPT D <span class="keyword">on</span> E.DEPTNO <span class="operator">=</span> D.DEPTNO;</span><br></pre></td></tr></table></figure>

<p><code>join</code>后面跟的是需要连接的表，<code>on</code>后面跟的是表的连接条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ENAME  | DNAME      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">+--------+------------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">	A</span><br><span class="line">inner join</span><br><span class="line">	B</span><br><span class="line">on</span><br><span class="line">	连接条件</span><br><span class="line">where</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>SQL99语法的结构更清晰一些，因为表的连接条件和后来的where条件分离了。</p>
<blockquote>
<p>inner join中的inner是可以缺省的。带着inner目的性是可读性高一些。</p>
</blockquote>
</li>
</ol>
<h3 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h3><p>非等值连接最大的特点是：连接条件中的关系是非等量关系。</p>
<ol>
<li><p>找出每个员工的工资等级，要求显示员工名、工资、工资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> E.ENAME, E.SAL, S.GRADE <span class="keyword">from</span> EMP E <span class="keyword">inner</span> <span class="keyword">join</span> SALGRADE S <span class="keyword">on</span> E.SAL <span class="keyword">between</span> S.LOSAL <span class="keyword">and</span> S.HISAL;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+---------+-------+</span><br><span class="line">| ENAME  | SAL     | GRADE |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| SMITH  |  800.00 |     1 |</span><br><span class="line">| ALLEN  | 1600.00 |     3 |</span><br><span class="line">| WARD   | 1250.00 |     2 |</span><br><span class="line">| JONES  | 2975.00 |     4 |</span><br><span class="line">| MARTIN | 1250.00 |     2 |</span><br><span class="line">| BLAKE  | 2850.00 |     4 |</span><br><span class="line">| CLARK  | 2450.00 |     4 |</span><br><span class="line">| SCOTT  | 3000.00 |     4 |</span><br><span class="line">| KING   | 5000.00 |     5 |</span><br><span class="line">| TURNER | 1500.00 |     3 |</span><br><span class="line">| ADAMS  | 1100.00 |     1 |</span><br><span class="line">| JAMES  |  950.00 |     1 |</span><br><span class="line">| FORD   | 3000.00 |     4 |</span><br><span class="line">| MILLER | 1300.00 |     2 |</span><br><span class="line">+--------+---------+-------+</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><p>自连接最大的特点是：一张表看做两张表。自己连接自己。</p>
<ol>
<li><p>找出每个员工的上级领导，要求显示员工名和对应的领导名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> EMP;</span><br></pre></td></tr></table></figure>

<p>EMP A员工表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+------+</span><br><span class="line">| EMPNO | ENAME  | MGR  |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">|  7369 | SMITH  | 7902 |</span><br><span class="line">|  7499 | ALLEN  | 7698 |</span><br><span class="line">|  7521 | WARD   | 7698 |</span><br><span class="line">|  7566 | JONES  | 7839 |</span><br><span class="line">|  7654 | MARTIN | 7698 |</span><br><span class="line">|  7698 | BLAKE  | 7839 |</span><br><span class="line">|  7782 | CLARK  | 7839 |</span><br><span class="line">|  7788 | SCOTT  | 7566 |</span><br><span class="line">|  7839 | KING   | NULL |</span><br><span class="line">|  7844 | TURNER | 7698 |</span><br><span class="line">|  7876 | ADAMS  | 7788 |</span><br><span class="line">|  7900 | JAMES  | 7698 |</span><br><span class="line">|  7902 | FORD   | 7566 |</span><br><span class="line">|  7934 | MILLER | 7782 |</span><br><span class="line">+-------+--------+------+</span><br></pre></td></tr></table></figure>

<p>EMP B领导表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+</span><br><span class="line">| EMPNO | ENAME  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">|  7698 | BLAKE  |</span><br><span class="line">|  7782 | CLARK  |</span><br><span class="line">|  7788 | SCOTT  |</span><br><span class="line">|  7839 | KING   |</span><br><span class="line">|  7902 | FORD   |</span><br><span class="line">+-------+--------+</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.ENAME <span class="keyword">as</span> <span class="string">&#x27;员工名&#x27;</span>, B.ENAME <span class="keyword">as</span> <span class="string">&#x27;领导名&#x27;</span> <span class="keyword">from</span> EMP A <span class="keyword">inner</span> <span class="keyword">join</span> EMP B <span class="keyword">on</span> A.mgr <span class="operator">=</span> B.empno;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| 员工   | 领导    |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  | FORD   |</span><br><span class="line">| ALLEN  | BLAKE  |</span><br><span class="line">| WARD   | BLAKE  |</span><br><span class="line">| JONES  | KING   |</span><br><span class="line">| MARTIN | BLAKE  |</span><br><span class="line">| BLAKE  | KING   |</span><br><span class="line">| CLARK  | KING   |</span><br><span class="line">| SCOTT  | JONES  |</span><br><span class="line">| TURNER | BLAKE  |</span><br><span class="line">| ADAMS  | SCOTT  |</span><br><span class="line">| JAMES  | BLAKE  |</span><br><span class="line">| FORD   | JONES  |</span><br><span class="line">| MILLER | CLARK  |</span><br><span class="line">+--------+--------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h2><p>什么是外连接，和内连接有什么区别？</p>
<ol>
<li><p>内连接<br>假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配的记录查询出来。AB两张表没有主副之分，两张表是平等的。</p>
</li>
<li><p>外连接<br>假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张是福表，主要查询主表中的数据，捎带查询副表。当副表中的数据没有和主表中的数据匹配上，附表自动模拟出NULL与之匹配。</p>
</li>
<li><p>外连接的分类</p>
<ul>
<li>左外连接（左连接）<br>左边那张表是主表</li>
<li>右外连接（右连接）<br>右边那张表是主表</li>
</ul>
<blockquote>
<p>左连接有右连接的写法，右连接也会有对应的左连接的写法。</p>
</blockquote>
</li>
</ol>
<p>外连接最重要的特点是：主表的数据无条件的全部查询出来。</p>
<ol>
<li><p>找出每个员工的上级领导（所有员工必须全部查询出来）</p>
<h3 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.ENAME <span class="keyword">as</span> <span class="string">&#x27;员工&#x27;</span>, B.ENAME <span class="keyword">as</span> <span class="string">&#x27;领导&#x27;</span> <span class="keyword">from</span> EMP A <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> EMP B <span class="keyword">on</span> A.MGR<span class="operator">=</span>B.EMPNO;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| 员工    | 领导   |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  | FORD   |</span><br><span class="line">| ALLEN  | BLAKE  |</span><br><span class="line">| WARD   | BLAKE  |</span><br><span class="line">| JONES  | KING   |</span><br><span class="line">| MARTIN | BLAKE  |</span><br><span class="line">| BLAKE  | KING   |</span><br><span class="line">| CLARK  | KING   |</span><br><span class="line">| SCOTT  | JONES  |</span><br><span class="line">| KING   | NULL   |</span><br><span class="line">| TURNER | BLAKE  |</span><br><span class="line">| ADAMS  | SCOTT  |</span><br><span class="line">| JAMES  | BLAKE  |</span><br><span class="line">| FORD   | JONES  |</span><br><span class="line">| MILLER | CLARK  |</span><br><span class="line">+--------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><code>left join</code>左外连接，A表是主表</p>
<h3 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.ENAME <span class="keyword">as</span> <span class="string">&#x27;员工&#x27;</span>, B.ENAME <span class="keyword">as</span> <span class="string">&#x27;领导&#x27;</span> <span class="keyword">from</span> EMP B <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> EMP A <span class="keyword">on</span> A.MGR<span class="operator">=</span>B.EMPNO;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| 员工    | 领导   |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  | FORD   |</span><br><span class="line">| ALLEN  | BLAKE  |</span><br><span class="line">| WARD   | BLAKE  |</span><br><span class="line">| JONES  | KING   |</span><br><span class="line">| MARTIN | BLAKE  |</span><br><span class="line">| BLAKE  | KING   |</span><br><span class="line">| CLARK  | KING   |</span><br><span class="line">| SCOTT  | JONES  |</span><br><span class="line">| KING   | NULL   |</span><br><span class="line">| TURNER | BLAKE  |</span><br><span class="line">| ADAMS  | SCOTT  |</span><br><span class="line">| JAMES  | BLAKE  |</span><br><span class="line">| FORD   | JONES  |</span><br><span class="line">| MILLER | CLARK  |</span><br><span class="line">+--------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>无论是left outer join还是right outer join，其中的outer是可以缺省的。</p>
</blockquote>
</li>
<li><p>找出哪个部门没有员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> A.<span class="operator">*</span> <span class="keyword">from</span> DEPT A <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> EMP B <span class="keyword">on</span> A.DEPTNO<span class="operator">=</span>B.DEPTNO <span class="keyword">where</span> B.DEPTNO <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+--------+</span><br><span class="line">| DEPTNO | DNAME      | LOC    |</span><br><span class="line">+--------+------------+--------+</span><br><span class="line">|     40 | OPERATIONS | BOSTON |</span><br><span class="line">+--------+------------+--------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="三张表连接查询"><a href="#三张表连接查询" class="headerlink" title="三张表连接查询"></a>三张表连接查询</h3><ol>
<li><p>找出每一个员工的部门名称以及工资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename, d.dname, s.grade <span class="keyword">from</span> emp e </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> salgrade s <span class="keyword">on</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+-------+</span><br><span class="line">| ename  | dname      | grade |</span><br><span class="line">+--------+------------+-------+</span><br><span class="line">| SMITH  | RESEARCH   |     1 |</span><br><span class="line">| ALLEN  | SALES      |     3 |</span><br><span class="line">| WARD   | SALES      |     2 |</span><br><span class="line">| JONES  | RESEARCH   |     4 |</span><br><span class="line">| MARTIN | SALES      |     2 |</span><br><span class="line">| BLAKE  | SALES      |     4 |</span><br><span class="line">| CLARK  | ACCOUNTING |     4 |</span><br><span class="line">| SCOTT  | RESEARCH   |     4 |</span><br><span class="line">| KING   | ACCOUNTING |     5 |</span><br><span class="line">| TURNER | SALES      |     3 |</span><br><span class="line">| ADAMS  | RESEARCH   |     1 |</span><br><span class="line">| JAMES  | SALES      |     1 |</span><br><span class="line">| FORD   | RESEARCH   |     4 |</span><br><span class="line">| MILLER | ACCOUNTING |     2 |</span><br><span class="line">+--------+------------+-------+</span><br></pre></td></tr></table></figure>


</li>
<li><p>找出每一个员工的部门名称、工资等级、以及上级领导。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename, b.ename <span class="keyword">as</span> <span class="string">&#x27;领导&#x27;</span>, d.dname, s.grade <span class="keyword">from</span> emp e </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp b <span class="keyword">on</span> e.mgr<span class="operator">=</span>b.empno</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> salgrade s <span class="keyword">on</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+------------+-------+</span><br><span class="line">| ename  | 领导   | dname      | grade |</span><br><span class="line">+--------+--------+------------+-------+</span><br><span class="line">| SMITH  | FORD   | RESEARCH   |     1 |</span><br><span class="line">| ALLEN  | BLAKE  | SALES      |     3 |</span><br><span class="line">| WARD   | BLAKE  | SALES      |     2 |</span><br><span class="line">| JONES  | KING   | RESEARCH   |     4 |</span><br><span class="line">| MARTIN | BLAKE  | SALES      |     2 |</span><br><span class="line">| BLAKE  | KING   | SALES      |     4 |</span><br><span class="line">| CLARK  | KING   | ACCOUNTING |     4 |</span><br><span class="line">| SCOTT  | JONES  | RESEARCH   |     4 |</span><br><span class="line">| KING   | NULL   | ACCOUNTING |     5 |</span><br><span class="line">| TURNER | BLAKE  | SALES      |     3 |</span><br><span class="line">| ADAMS  | SCOTT  | RESEARCH   |     1 |</span><br><span class="line">| JAMES  | BLAKE  | SALES      |     1 |</span><br><span class="line">| FORD   | JONES  | RESEARCH   |     4 |</span><br><span class="line">| MILLER | CLARK  | ACCOUNTING |     2 |</span><br><span class="line">+--------+--------+------------+-------+</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h1><h2 id="什么是子查询？"><a href="#什么是子查询？" class="headerlink" title="什么是子查询？"></a>什么是子查询？</h2><p>什么是子查询？子查询都可以出现在哪里？</p>
<ul>
<li><p>什么是子查询？<br>select语句当中嵌套select语句，被嵌套的select语句是子查询。</p>
</li>
<li><p>子查询可以出现在哪里？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	...(<span class="keyword">select</span>)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	...(<span class="keyword">select</span>)</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	...(<span class="keyword">select</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="在where语句中使用子查询"><a href="#在where语句中使用子查询" class="headerlink" title="在where语句中使用子查询"></a>在where语句中使用子查询</h2><ol>
<li><p>找出高于平均工资的员工信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB       | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">|  7566 | JONES | MANAGER   | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">|  7698 | BLAKE | MANAGER   | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">|  7782 | CLARK | MANAGER   | 7839 | 1981-06-09 | 2450.00 | NULL |     10 |</span><br><span class="line">|  7788 | SCOTT | ANALYST   | 7566 | 1987-04-19 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7839 | KING  | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL |     10 |</span><br><span class="line">|  7902 | FORD  | ANALYST   | 7566 | 1981-12-03 | 3000.00 | NULL |     20 |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出每个部门的平均薪资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.dname, s.grade, (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp e <span class="keyword">where</span> e.deptno<span class="operator">=</span>d.deptno ) <span class="keyword">as</span> avgsal <span class="keyword">from</span> dept d </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> salgrade s <span class="keyword">on</span> </span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp e <span class="keyword">where</span> e.deptno<span class="operator">=</span>d.deptno ) <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+------------+-------+-------------+</span><br><span class="line">| dname      | grade | avgsal      |</span><br><span class="line">+------------+-------+-------------+</span><br><span class="line">| ACCOUNTING |     4 | 2916.666667 |</span><br><span class="line">| RESEARCH   |     4 | 2175.000000 |</span><br><span class="line">| SALES      |     3 | 1566.666667 |</span><br><span class="line">| OPERATIONS |  NULL |        NULL |</span><br><span class="line">+------------+-------+-------------+</span><br></pre></td></tr></table></figure>



<p>以上代码是我写的，下面的是教程里的(我做了些小变动)，对比之后惨不忍睹</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.dname, t.avgsal, s.grade <span class="keyword">from</span> </span><br><span class="line">	(<span class="keyword">select</span> deptno, <span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> d.deptno <span class="operator">=</span> t.deptno</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> salgrade s <span class="keyword">on</span> t.avgsal <span class="keyword">between</span> s.losal <span class="keyword">and</span> hisal;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------------+-------------+-------+</span><br><span class="line">| dname      | avgsal      | grade |</span><br><span class="line">+------------+-------------+-------+</span><br><span class="line">| RESEARCH   | 2175.000000 |     4 |</span><br><span class="line">| SALES      | 1566.666667 |     3 |</span><br><span class="line">| ACCOUNTING | 2916.666667 |     4 |</span><br><span class="line">+------------+-------------+-------+</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出每个部门薪资等级的平均等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e1.deptno, <span class="built_in">avg</span>(s.GRADE) <span class="keyword">from</span> emp e1 <span class="keyword">join</span> salgrade s <span class="keyword">on</span> e1.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal <span class="keyword">group</span> <span class="keyword">by</span> e1.deptno;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------------+</span><br><span class="line">| deptno | avg(s.GRADE) |</span><br><span class="line">+--------+--------------+</span><br><span class="line">|     20 |       2.8000 |</span><br><span class="line">|     30 |       2.5000 |</span><br><span class="line">|     10 |       3.6667 |</span><br><span class="line">+--------+--------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="在select后面嵌套子查询"><a href="#在select后面嵌套子查询" class="headerlink" title="在select后面嵌套子查询"></a>在select后面嵌套子查询</h2><ol>
<li><p>找出每个员工所在的部门名称，要求显示员工名和部门名。</p>
<ul>
<li><p>找出员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e1.ename <span class="keyword">from</span> emp e1;</span><br></pre></td></tr></table></figure>
</li>
<li><p>找出部门</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示员工名和部门名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e1.ename,</span><br><span class="line">	(<span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d <span class="keyword">where</span> d.deptno <span class="operator">=</span> e1.deptno) <span class="keyword">as</span> dname</span><br><span class="line"><span class="keyword">from</span> emp e1;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| JAMES  | SALES      |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">+--------+------------+</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="union的用法"><a href="#union的用法" class="headerlink" title="union的用法"></a>union的用法</h1><p>union可以将查询结果相加，在进行相加时两条语句的查询结果列数必须一样。</p>
<ol>
<li><p>找出工作岗位是SALESMAN和MANAGER的员工。</p>
<p>第一种</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="keyword">in</span>(<span class="string">&#x27;SALESMAN&#x27;</span>, <span class="string">&#x27;MANAGER&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>第二种</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span> <span class="keyword">or</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>第三种使用union</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span></span><br><span class="line"><span class="keyword">union</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h1><p>limit是mysql特有的，其它数据库没有，不通用。limit取结果集中的部分数据</p>
<ul>
<li>语法机制：limit startIndex，length<br>startIndex表示起使位置,从0开始。<br>length表示取几个</li>
</ul>
<ol>
<li><p>取出工资前五名的员工。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">0</span>, <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB       | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">|  7839 | KING  | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL |     10 |</span><br><span class="line">|  7788 | SCOTT | ANALYST   | 7566 | 1987-04-19 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7902 | FORD  | ANALYST   | 7566 | 1981-12-03 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7566 | JONES | MANAGER   | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">|  7698 | BLAKE | MANAGER   | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果limit startIndex第一个数字没写，那么默认值就是0。limit是sql语句最后执行的一个环节。</p>
</blockquote>
</li>
<li><p>取出工资排名在第4到第9名的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">3</span>, <span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+----------+------+------------+---------+--------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM   | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+--------+--------+</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |   NULL |     20 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER  | 7839 | 1981-05-01 | 2850.00 |   NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER  | 7839 | 1981-06-09 | 2450.00 |   NULL |     10 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 | 300.00 |     30 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |   0.00 |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK    | 7782 | 1982-01-23 | 1300.00 |   NULL |     10 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+--------+--------+</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="表"><a href="#表" class="headerlink" title="表"></a>表</h1><p>建表语句的语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line">	字段名<span class="number">1</span> 数据类型，</span><br><span class="line">  字段名<span class="number">2</span> 数据类型，</span><br><span class="line">  字段名<span class="number">3</span> 数据类型，</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="关于MySQL当中常用字段的数据类型。"><a href="#关于MySQL当中常用字段的数据类型。" class="headerlink" title="关于MySQL当中常用字段的数据类型。"></a>关于MySQL当中常用字段的数据类型。</h2><p>常用的数据类型有：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>整数型（java中的int）</td>
</tr>
<tr>
<td>bigint</td>
<td>长整形（java中的Long）</td>
</tr>
<tr>
<td>float</td>
<td>浮点型（java中的float、double）</td>
</tr>
<tr>
<td>char</td>
<td>定长字符串（String）</td>
</tr>
<tr>
<td>varchar</td>
<td>可变长字符串（StringBuffer&#x2F;StringBuilder）</td>
</tr>
<tr>
<td>data</td>
<td>日期类型（对应Java中的java.sql.Date类型）</td>
</tr>
<tr>
<td>BLOB</td>
<td>二进制大对象（存储图片、视频等流媒体信息）Binary Large Object（对应java中的Object）</td>
</tr>
<tr>
<td>CLOB</td>
<td>字符大对象（存储较大文本，比如：可以存储4G的字符串）Character Large Object（对应java中的Object）</td>
</tr>
</tbody></table>
<h3 id="char和varchar如何选择？"><a href="#char和varchar如何选择？" class="headerlink" title="char和varchar如何选择？"></a>char和varchar如何选择？</h3><p>在实际开发中，当某个字段中的数据长度不发生改变的时候，是定长的，例如：性别、生日等都是采用char。</p>
<p>当一个字段的数据长度不确定，例如：简介、姓名等都是采用varchar。</p>
<h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><blockquote>
<p>表名在数据库当中一般建议以**t_<strong>或者</strong>tbl_**开始。</p>
</blockquote>
<p>创建学生表：</p>
<pre><code>学生信息有：
</code></pre>
<ul>
<li><p>学号<br>bigint</p>
</li>
<li><p>姓名<br>varchar</p>
</li>
<li><p>性别</p>
<p>char</p>
</li>
<li><p>班级编号</p>
<p>int</p>
</li>
<li><p>生日</p>
<p>char</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	stuno <span class="type">bigint</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  sex <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">  classno <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  birth <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br><span class="line">+--------------------------+</span><br><span class="line">| Tables_in_upyou_database |</span><br><span class="line">+--------------------------+</span><br><span class="line">| DEPT                     |</span><br><span class="line">| EMP                      |</span><br><span class="line">| SALGRADE                 |</span><br><span class="line">| t_student                |</span><br><span class="line">+--------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>查看刚刚建的表的结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| stuno   | bigint       | YES  |     | NULL    |       |</span><br><span class="line">| name    | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| sex     | char(1)      | YES  |     | NULL    |       |</span><br><span class="line">| classno | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| birth   | char(10)     | YES  |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>



<h2 id="insert语句插入数据"><a href="#insert语句插入数据" class="headerlink" title="insert语句插入数据"></a>insert语句插入数据</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名<span class="number">1</span>, 字段名<span class="number">2</span>, 字段名<span class="number">3</span>) <span class="keyword">values</span>(值<span class="number">1</span>, 值<span class="number">2</span>, 值<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>字段的数量和值的数量相同，并且数据类型要对应相同。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(stuno, name, sex, classno, birth) <span class="keyword">values</span>(<span class="number">020413</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>若显示一行受影响表示操作成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>查询刚刚插入的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| stuno | name  | sex  | classno | birth      |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| 20413 | UpYou | 男   | 2020414 | 2002-04-13 |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br></pre></td></tr></table></figure>

<p>如果字段可以为空，并且你没有给该字段插入值时，会字段将NULL插入到该字段。(插入NULL说的并不准确，因为是不会给未指定的字段插入数据，查询的时候是将为<strong>空</strong>的数据显示为NULL)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(name)<span class="keyword">values</span>(<span class="string">&#x27;UoYou&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| stuno | name  | sex  | classno | birth      |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| 20413 | UpYou | 男   | 2020414 | 2002-04-13 |</span><br><span class="line">|  NULL | UoYou | NULL | NULL    | NULL       |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br></pre></td></tr></table></figure>



<blockquote>
<p>当一条insert语句执行成功之后，表格当中必然会多一条记录。即使多的这一行记录当中某些字段是NULL，后期也没有办法再执行insert语句插入数据了，只能使用update进行更新。</p>
</blockquote>
<p>如果不指定插入的字段时，values中列的字段、顺序必须与表格结构一致(多一个不行，少一个不行)。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student <span class="keyword">values</span>(<span class="number">020413</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>);</span><br></pre></td></tr></table></figure>



<p>一次插入多行数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span></span><br><span class="line">	t_student(stuno, name, sex, classno, birth) </span><br><span class="line"><span class="keyword">values</span> </span><br><span class="line">	(<span class="number">020413</span>, <span class="string">&#x27;UpYou一号&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>),</span><br><span class="line">	(<span class="number">020413</span>, <span class="string">&#x27;UpYou二号&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>),</span><br><span class="line">	(<span class="number">020413</span>, <span class="string">&#x27;UpYou三号&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>);</span><br></pre></td></tr></table></figure>





<h3 id="表的复制以及批量插入"><a href="#表的复制以及批量插入" class="headerlink" title="表的复制以及批量插入"></a>表的复制以及批量插入</h3><h4 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h4><p>语法：<br>将查询结果当作表创建出来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 <span class="keyword">as</span> DQL语句;</span><br></pre></td></tr></table></figure>




<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp2 <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 14 rows affected, 2 warnings (0.01 sec)</span><br><span class="line">Records: 14  Duplicates: 0  Warnings: 2</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h4 id="批量插入"><a href="#批量插入" class="headerlink" title="批量插入"></a>批量插入</h4><p>将查询结果批量插入到某张表中。</p>
<p>语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">as</span> DQL语句;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `emp2` (</span><br><span class="line">  `EMPNO` int NOT NULL,</span><br><span class="line">  `ENAME` varchar(10) DEFAULT NULL,</span><br><span class="line">  `JOB` varchar(9) DEFAULT NULL,</span><br><span class="line">  `MGR` int DEFAULT NULL,</span><br><span class="line">  `HIREDATE` date DEFAULT NULL,</span><br><span class="line">  `SAL` double(7,2) DEFAULT NULL,</span><br><span class="line">  `COMM` double(7,2) DEFAULT NULL,</span><br><span class="line">  `DEPTNO` int DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`EMPNO`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp2 <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 14 rows affected (0.00 sec)</span><br><span class="line">Records: 14  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2 limit <span class="number">0</span>, <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB      | MGR  | HIREDATE   | SAL     | COMM   | DEPTNO |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">|  7369 | SMITH | CLERK    | 7902 | 1980-12-17 |  800.00 |   NULL |     20 |</span><br><span class="line">|  7499 | ALLEN | SALESMAN | 7698 | 1981-02-20 | 1600.00 | 300.00 |     30 |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br></pre></td></tr></table></figure>







<h2 id="定义默认值"><a href="#定义默认值" class="headerlink" title="定义默认值"></a>定义默认值</h2><p>将<code>t_student</code>删掉，重新创建一张表，并且将sex字段默认值设为<code>男</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	stuno <span class="type">bigint</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  sex <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">  classno <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  birth <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> t_student;</span><br></pre></td></tr></table></figure>

<p>此时Default栏就有了一个默认值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| stuno   | bigint       | YES  |     | NULL    |       |</span><br><span class="line">| name    | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| sex     | char(1)      | YES  |     | 男      |       |</span><br><span class="line">| classno | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| birth   | char(10)     | YES  |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<p>再插入数据，不设置<code>sex</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(stuno, name, classno, birth) <span class="keyword">values</span>(<span class="number">020413</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2002-04-13&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| stuno | name  | sex  | classno | birth      |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">| 20413 | UpYou | 男   | 2020414 | 2002-04-13 |</span><br><span class="line">+-------+-------+------+---------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>再插入一条数据，设置<code>sex</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(stuno, name, sex, classno, birth) <span class="keyword">values</span>(<span class="number">020413</span>, <span class="string">&#x27;UpYou那并不存在的妹妹&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">2020414</span>, <span class="string">&#x27;2003-04-13&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------+----------------------------+------+---------+------------+</span><br><span class="line">| stuno | name                       | sex  | classno | birth      |</span><br><span class="line">+-------+----------------------------+------+---------+------------+</span><br><span class="line">| 20413 | UpYou                      | 男   | 2020414 | 2002-04-13 |</span><br><span class="line">| 20413 | UpYou那并不存在的妹妹         | 女   | 2020414 | 2003-04-13 |</span><br><span class="line">+-------+----------------------------+------+---------+------------+</span><br></pre></td></tr></table></figure>





<h2 id="update-修改数据"><a href="#update-修改数据" class="headerlink" title="update 修改数据"></a>update 修改数据</h2><p>语法格式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>， 字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2.</span>.. <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>没有条件整张表数据全部更新。</strong></p>
</blockquote>
<ol>
<li><p>将部门1o的LOC修改为SHANGHAI，将部门名称修改为RENSHIBU</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> dept1 <span class="keyword">set</span> DNAME<span class="operator">=</span><span class="string">&#x27;RENSHIBU&#x27;</span>, LOC<span class="operator">=</span><span class="string">&#x27;SHANGHAI&#x27;</span> <span class="keyword">where</span> deptno<span class="operator">=</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept1;</span><br></pre></td></tr></table></figure>

   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   +--------+------------+----------+</span><br><span class="line">   | DEPTNO | DNAME      | LOC      |</span><br><span class="line">   +--------+------------+----------+</span><br><span class="line">   |     10 | RENSHIBU   | SHANGHAI |</span><br><span class="line">   |     20 | RESEARCH   | DALLAS   |</span><br><span class="line">   |     30 | SALES      | CHICAGO  |</span><br><span class="line">   |     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">   4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>如果没<strong>where</strong>或者<strong>忘记</strong>给<strong>where</strong>。。。。。那就完蛋了，跑路吧！！！</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> dept1 <span class="keyword">set</span> DNAME<span class="operator">=</span><span class="string">&#x27;RENSHIBU&#x27;</span>, LOC<span class="operator">=</span><span class="string">&#x27;SHANGHAI&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 3 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 4  Changed: 3  Warnings: 0</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept1;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+----------+----------+</span><br><span class="line">| DEPTNO | DNAME    | LOC      |</span><br><span class="line">+--------+----------+----------+</span><br><span class="line">|     10 | RENSHIBU | SHANGHAI |</span><br><span class="line">|     20 | RENSHIBU | SHANGHAI |</span><br><span class="line">|     30 | RENSHIBU | SHANGHAI |</span><br><span class="line">|     40 | RENSHIBU | SHANGHAI |</span><br><span class="line">+--------+----------+----------+</span><br></pre></td></tr></table></figure>





<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p>语法格式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>没有条件<strong>全部删除</strong>。</p>
</blockquote>
<ol>
<li><p>删除10部门数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | RENSHIBU   | SHANGHAI |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept1 <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept1;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+--------+------------+---------+</span><br><span class="line">| DEPTNO | DNAME      | LOC     |</span><br><span class="line">+--------+------------+---------+</span><br><span class="line">|     20 | RESEARCH   | DALLAS  |</span><br><span class="line">|     30 | SALES      | CHICAGO |</span><br><span class="line">|     40 | OPERATIONS | BOSTON  |</span><br><span class="line">+--------+------------+---------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>由于delete删除数据较慢，所以删除全部数据的时候使用<code>truncate</code>删除大表。(重点)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table dept1;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept1;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>truncate是将表截断（就剩下表头），不可回滚。truncate删除之后不可回滚，所以必须确认该表数据是否真的删除。</p>
</blockquote>
<h2 id="表约束"><a href="#表约束" class="headerlink" title="表约束"></a>表约束</h2><p>约束，英语单词（Constraint）</p>
<h3 id="什么是约束？"><a href="#什么是约束？" class="headerlink" title="什么是约束？"></a>什么是约束？</h3><p>在创建表的时候，可以给表的字段添加约束，添加约束是为了保证数据的完整性、合法性、有效性。</p>
<p>常见的约束有：</p>
<ul>
<li><p>非空约束（not null）</p>
<p>约束的字段不能为NULL</p>
</li>
<li><p>唯一约束（unique）<br>约束的字段不能重复</p>
</li>
<li><p>主键约束（primary key，简称PK）<br>约束的字段既不能为NULL也不能重复</p>
</li>
<li><p>外键约束（foreign key，简称FK）</p>
</li>
<li><p>检查约束（check）<br>Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。</p>
</li>
</ul>
<blockquote>
<p>增删改查术语：CRUD<br>Create Retrieve Update Delete</p>
</blockquote>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	id <span class="type">int</span> ,</span><br><span class="line">  user_name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  password <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field     | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| id        | int          | YES  |     | NULL    |       |</span><br><span class="line">| user_name | varchar(255) | NO   |     | NULL    |       |</span><br><span class="line">| password  | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<p><code>user_name</code>字段设置了非空约束，现在插入一条<code>user_name</code>为空的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(id, password) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;123456789&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>插入异常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Field &#x27;user_name&#x27; doesn&#x27;t have a default value</span><br></pre></td></tr></table></figure>



<h3 id="唯一性约束"><a href="#唯一性约束" class="headerlink" title="唯一性约束"></a>唯一性约束</h3><p>唯一约束修饰的字段具有唯一性，不能为空， 不能重复。但可以为NULL。</p>
<p>单个字段约束专业术语叫：列级约束</p>
<p>多个字段约束专业术语叫：表级约束</p>
<p>表级约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">  字段<span class="number">1</span>,</span><br><span class="line">  字段<span class="number">2</span>,</span><br><span class="line">  字段<span class="number">3</span>,</span><br><span class="line">  <span class="keyword">unique</span>(字段<span class="number">1</span>, 字段<span class="number">2</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<hr>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	id <span class="type">int</span>,</span><br><span class="line">  user_name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">unique</span>,</span><br><span class="line">  password <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field     | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| id        | int          | YES  |     | NULL    |       |</span><br><span class="line">| user_name | varchar(255) | YES  | UNI | NULL    |       |</span><br><span class="line">| password  | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<p>插入两条数据数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(id, user_name, password) </span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">	(<span class="number">1</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="string">&#x27;123&#x27;</span>),</span><br><span class="line">	(<span class="number">2</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>出现异常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;UpYou&#x27; for key &#x27;t_user.user_name&#x27;</span><br></pre></td></tr></table></figure>

<p>插入两条数据，让<code>user_name</code>为NULL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(id, password) </span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">	(<span class="number">1</span>, <span class="string">&#x27;123&#x27;</span>),</span><br><span class="line">	(<span class="number">2</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>插入成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Query OK, 2 rows affected (0.00 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------+-----------+----------+</span><br><span class="line">| id   | user_name | password |</span><br><span class="line">+------+-----------+----------+</span><br><span class="line">|    1 | NULL      | 123      |</span><br><span class="line">|    2 | NULL      | 123456   |</span><br><span class="line">+------+-----------+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>一张表中如果有多个字段有唯一性约束（unique），那么意思是联合起来约束。</p>
</blockquote>
<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p>怎么给一张表添加主键约束？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">  user_name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  password <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field     | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br><span class="line">| id        | int          | NO   | PRI | NULL    |       |</span><br><span class="line">| user_name | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">| password  | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">+-----------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<p>在表中插入一条数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;UpYou&#x27;</span>, <span class="string">&#x27;123&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>再插入一条<code>id</code>为1的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;UpYou那个不存在的妹妹&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>错误，id重复</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;t_user.PRIMARY&#x27;</span><br></pre></td></tr></table></figure>

<p>不插入id试试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(user_name, password) <span class="keyword">values</span>(<span class="string">&#x27;UpYou那个不存在的妹妹&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>错误，没有指定默认值，也就是说不能为NULL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1364 (HY000): Field &#x27;id&#x27; doesn&#x27;t have a default value</span><br></pre></td></tr></table></figure>



<h4 id="主键相关术语"><a href="#主键相关术语" class="headerlink" title="主键相关术语"></a>主键相关术语</h4><ul>
<li><p>主键约束</p>
<p>primary key</p>
</li>
<li><p>主键字段<br>id字段添加primary key之后，id叫做主键字段</p>
</li>
<li><p>主键值<br>id字段添加primary key之后，id的每一个值都是主键值。</p>
</li>
</ul>
<h4 id="主键有什么用？"><a href="#主键有什么用？" class="headerlink" title="主键有什么用？"></a>主键有什么用？</h4><ul>
<li>表的设计三范式中有要求，第一范式要求任何一张表都应该有主键。</li>
<li>主键的作用：主键值是这行记录在这张表中的唯一标识。（就像一个人的身份证号码一样）</li>
</ul>
<h4 id="主键的分类"><a href="#主键的分类" class="headerlink" title="主键的分类"></a>主键的分类</h4><p>工具主键字段的字段数量来划分：</p>
<ul>
<li><p>单一主键<br>比较常用的</p>
</li>
<li><p>复合主键</p>
<p>多个字段联合起来添加一个主键约束。复合主键不建议使用，因为复合主键违背三范式</p>
</li>
</ul>
<p>根据主键性质来划分：</p>
<ul>
<li>自然主键<br>主键值最好就是一个和业务没有任何关系的自然数</li>
<li>业务主键（不推荐用）<br>主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键，拿着身份证号做主键。</li>
</ul>
<blockquote>
<p>一张表的主键约束只能有一个</p>
</blockquote>
<h4 id="主键值自增"><a href="#主键值自增" class="headerlink" title="主键值自增"></a>主键值自增</h4><p><code>auto_increment</code>将<code>primary key</code>修饰的字段自动维护一个自增的数，从<code>1</code>开始以<code>1</code>递增。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  user_name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field     | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br><span class="line">| id        | int          | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| user_name | varchar(255) | YES  |     | NULL    |                |</span><br><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>现在插入一个值，但不设置<code>id</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(user_name) <span class="keyword">values</span> (<span class="string">&#x27;UpYou&#x27;</span>), (<span class="string">&#x27;UpYou那并不存在的妹妹&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------------------------+</span><br><span class="line">| id | user_name                     |</span><br><span class="line">+----+-------------------------------+</span><br><span class="line">|  1 | UpYou                         |</span><br><span class="line">|  2 | UpYou那并不存在的妹妹        		|</span><br><span class="line">+----+-------------------------------+</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Oracle当中也提供了一个自增机制，叫做：序列（sequence）</p>
</blockquote>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>关于外键约束的术语：</p>
<ul>
<li><p>外键约束：<br>foreign key</p>
</li>
<li><p>外键字段<br>添加有外键约束的字段</p>
</li>
<li><p>外键值<br>外键字段中的每一个值</p>
</li>
</ul>
<h4 id="业务背景"><a href="#业务背景" class="headerlink" title="业务背景"></a>业务背景</h4><ol>
<li><p>请设计数据库表，用来维护学生和班级的信息。</p>
<ol>
<li><p>一张表存储所有数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------+-------------------------------+---------+------------------------------+</span><br><span class="line">| no(PK)   | name                          | classno | classname                    |</span><br><span class="line">+----------+-------------------------------+---------+------------------------------+</span><br><span class="line">|    1     | UpYou                         |     101 | 传说中的高中高三1班    		      |</span><br><span class="line">|    2     | UpYou那并不存在的妹妹     		    |     102 | 传说中的高中高三1班   		       |</span><br><span class="line">+----------+-------------------------------+---------+------------------------------+</span><br></pre></td></tr></table></figure>

<p>这种方式会导致数据冗余。不推荐</p>
</li>
<li><p>两张表（班级表和学生表）<br><code>t_class</code> 班级表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------+------------------------------+</span><br><span class="line">| cno  | cname                        |</span><br><span class="line">+------+------------------------------+</span><br><span class="line">|  101 | 传说中的高中高三1班         	  |</span><br><span class="line">|  102 | 传说中的高中高三2班      		    |</span><br><span class="line">|  103 | 传说中的高中高三3班       	    |</span><br><span class="line">+------+------------------------------+</span><br></pre></td></tr></table></figure>

<p><code>t_student</code>学生表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------+----------------------------------+</span><br><span class="line">| no   | name                             |</span><br><span class="line">+------+----------------------------------+</span><br><span class="line">|    1 | UpYou                            |</span><br><span class="line">|    2 | UpYou那并不存在的妹妹              |</span><br><span class="line">|    3 | UpYou那并不存在的二妹妹          		|</span><br><span class="line">+------+----------------------------------+</span><br></pre></td></tr></table></figure>

<p>以上两张表看不出他们之间的关系，而第一种方法可以很清晰的看出这个学生所在班级。</p>
<p>给<code>t_student</code>学生表添加一个字段<code>cno</code>并且给该字段添加外键约束<code>FK</code>，如果不给该字段添加外键约束，那么这个字段中的值可以随便填，如果加上外键约束就表示这个字段的值是某一张表中的某个主键值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+------+-----------------------------------------------------+------+---+</span><br><span class="line">| no   | name                                                | cno(FK)  |</span><br><span class="line">+------+-----------------------------------------------------+------+---+</span><br><span class="line">|    1 | UpYou                                               |    101   |</span><br><span class="line">|    2 | UpYou那并不存在的妹妹                                  |    101   |</span><br><span class="line">|    3 | UpYou那并不存在的二妹妹(不在同个班表示很生气)             |    103   |</span><br><span class="line">+------+-----------------------------------------------------+------+---+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果此时修改学生表中的第一条数据<code>cno</code>字段为110时，修改出错，因为<code>t_class</code>表中没有这个班级。<br><code>t_student</code>中的<code>cno</code>字段引用<code>t_class</code>表中的<code>cno</code>字段，此时<code>t_student</code>表叫做子表。<code>t_class</code>表叫做父表。</p>
</li>
</ol>
</li>
</ol>
<ul>
<li><p>删除数据的时候先删除子表再删除父表。</p>
</li>
<li><p>添加数据的时候，先添加父表再添加子表。</p>
</li>
<li><p>创建表的时候，先创建父表再创建子表。</p>
</li>
<li><p>删除表的时候先删除子表，再删除父表。</p>
</li>
</ul>
<p>将解决方案二中的表创建出来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_class;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_class(</span><br><span class="line">	cno <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">  cname <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">	sno <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  sname <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  classno <span class="type">int</span>,</span><br><span class="line">  <span class="keyword">foreign</span> key(classno) <span class="keyword">references</span> t_class(cno)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>t_class</code>班级表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type         | Null | Key | Default | Extra |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br><span class="line">| cno   | int          | NO   | PRI | NULL    |       |</span><br><span class="line">| cname | varchar(255) | YES  |     | NULL    |       |</span><br><span class="line">+-------+--------------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure>

<p><code>t_student</code> 学生表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field   | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br><span class="line">| sno     | int          | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| sname   | varchar(255) | YES  |     | NULL    |                |</span><br><span class="line">| classno | int          | YES  | MUL | NULL    |                |</span><br><span class="line">+---------+--------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure>

<p>插入数据，应该先插入父表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_class <span class="keyword">values</span> </span><br><span class="line">(<span class="number">101</span>, <span class="string">&#x27;传说中的高中高三1班&#x27;</span>),</span><br><span class="line">(<span class="number">102</span>, <span class="string">&#x27;传说中的高中高三2班&#x27;</span>),</span><br><span class="line">(<span class="number">103</span>, <span class="string">&#x27;传说中的高中高三3班&#x27;</span>),</span><br><span class="line">(<span class="number">104</span>, <span class="string">&#x27;传说中的高中高三4班&#x27;</span>),</span><br><span class="line">(<span class="number">105</span>, <span class="string">&#x27;传说中的高中高三5班&#x27;</span>),</span><br><span class="line">(<span class="number">106</span>, <span class="string">&#x27;传说中的高中高三6班&#x27;</span>),</span><br><span class="line">(<span class="number">107</span>, <span class="string">&#x27;传说中的高中高三7班&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_class;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+-----+------------------------------+</span><br><span class="line">| cno | cname                        |</span><br><span class="line">+-----+------------------------------+</span><br><span class="line">| 101 | 传说中的高中高三1班             |</span><br><span class="line">| 102 | 传说中的高中高三2班             |</span><br><span class="line">| 103 | 传说中的高中高三3班             |</span><br><span class="line">| 104 | 传说中的高中高三4班             |</span><br><span class="line">| 105 | 传说中的高中高三5班             |</span><br><span class="line">| 106 | 传说中的高中高三6班             |</span><br><span class="line">| 107 | 传说中的高中高三7班             |</span><br><span class="line">+-----+------------------------------+</span><br></pre></td></tr></table></figure>

<p>再给子表插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(sname, classno) <span class="keyword">values</span> </span><br><span class="line">(<span class="string">&#x27;UpYou&#x27;</span>, <span class="number">102</span>),</span><br><span class="line">(<span class="string">&#x27;UpYou那并不存在的妹妹&#x27;</span>, <span class="number">102</span>),</span><br><span class="line">(<span class="string">&#x27;UpYou那并不存在的二妹妹（不在同个班表示很生气）&#x27;</span>, <span class="number">103</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_student;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----+--------------------------------------------------------+---------+</span><br><span class="line">| sno | sname                                                  | classno |</span><br><span class="line">+-----+--------------------------------------------------------+---------+</span><br><span class="line">|   1 | UpYou                                                  |     102 |</span><br><span class="line">|   2 | UpYou那并不存在的妹妹                              	      |     102 |</span><br><span class="line">|   3 | UpYou那并不存在的二妹妹（不在同个班表示很生气）               |     103 |</span><br><span class="line">+-----+--------------------------------------------------------+---------+</span><br></pre></td></tr></table></figure>

<p>此时如果添加一条不存在的班级</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(sname, classno) <span class="keyword">values</span> </span><br><span class="line">(<span class="string">&#x27;UpYou&#x27;</span>, <span class="number">1020</span>);</span><br></pre></td></tr></table></figure>

<p>出现错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`upyou_database`.`t_student`, CONSTRAINT `t_student_ibfk_1` FOREIGN KEY (`classno`) REFERENCES `t_class` (`cno`))</span><br></pre></td></tr></table></figure>

<p>新增一个外键为空的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_student(sname) <span class="keyword">values</span>(<span class="string">&#x27;UpYou那并不存在的三妹妹&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_student;</span><br></pre></td></tr></table></figure>

<p>外键可以为空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-----+-------------------------------------------------------+---------+</span><br><span class="line">| sno | sname                                                 | classno |</span><br><span class="line">+-----+-------------------------------------------------------+---------+</span><br><span class="line">|   1 | UpYou                                                 |     102 |</span><br><span class="line">|   2 | UpYou那并不存在的妹妹                                    |     102 |</span><br><span class="line">|   3 | UpYou那并不存在的二妹妹（不在同个班表示很生气）              |     103 |</span><br><span class="line">|   5 | UpYou那并不存在的三妹妹                                  |    NULL |</span><br><span class="line">+-----+-------------------------------------------------------+---------+</span><br></pre></td></tr></table></figure>



<blockquote>
<ul>
<li><p>外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？</p>
<p>被引用的字段不一定是主键，但至少具有 <code>unique</code> 约束。</p>
</li>
</ul>
</blockquote>
<h1 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h1><h2 id="什么是存储引擎"><a href="#什么是存储引擎" class="headerlink" title="什么是存储引擎"></a>什么是存储引擎</h2><p>储存引擎描述的是表的存储方式。在MySQL当中，不同的存储引擎会有不同的存储方式。存储引擎这个名字只有在mysql中存在。（Oracle中有对应的机制，但是不叫做存储引擎，Oracle中没有特殊的名字，就叫：表的存储方式）</p>
<p>MySQL支持很多存储引擎，每一种存储引擎都对应了一种不同的存储方式。每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。</p>
<h2 id="查看存储引擎"><a href="#查看存储引擎" class="headerlink" title="查看存储引擎"></a>查看存储引擎</h2><p>查看建表语句可以查看一张表使用的是怎样的存储引擎。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table emp;</span><br></pre></td></tr></table></figure>

<p><code>ENGINE=InnoDB</code> 指明了这张表用的是<code>InnoDB</code>存储引擎。下面这条代码才是一个完整的建表语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| emp   | CREATE TABLE emp (</span><br><span class="line">  ......</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |</span><br></pre></td></tr></table></figure>

<p>建表的时候可以指定存储引擎和字符集，如果创建表的时候没有指定存储引擎，默认使用的是<strong>InnoDB</strong>存储引擎，字符集默认采用的是<strong>utf8mb4</strong>（在我MacOS中是如此，我MySQL版本8.0+）</p>
<h2 id="常见的存储引擎"><a href="#常见的存储引擎" class="headerlink" title="常见的存储引擎"></a>常见的存储引擎</h2><p>MySQL8.0.22中支持的存储引擎</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show engines;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">*************************** 1. row ***************************</span><br><span class="line">      Engine: ARCHIVE</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Archive storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">      Engine: BLACKHOLE</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: /dev/null storage engine (anything you write to it disappears)</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 3. row ***************************</span><br><span class="line">      Engine: MRG_MYISAM</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Collection of identical MyISAM tables</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 4. row ***************************</span><br><span class="line">      Engine: FEDERATED</span><br><span class="line">     Support: NO</span><br><span class="line">     Comment: Federated MySQL storage engine</span><br><span class="line">Transactions: NULL</span><br><span class="line">          XA: NULL</span><br><span class="line">  Savepoints: NULL</span><br><span class="line">*************************** 5. row ***************************</span><br><span class="line">      Engine: MyISAM</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: MyISAM storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 6. row ***************************</span><br><span class="line">      Engine: PERFORMANCE_SCHEMA</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Performance Schema</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 7. row ***************************</span><br><span class="line">      Engine: InnoDB</span><br><span class="line">     Support: DEFAULT</span><br><span class="line">     Comment: Supports transactions, row-level locking, and foreign keys</span><br><span class="line">Transactions: YES</span><br><span class="line">          XA: YES</span><br><span class="line">  Savepoints: YES</span><br><span class="line">*************************** 8. row ***************************</span><br><span class="line">      Engine: MEMORY</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Hash based, stored in memory, useful for temporary tables</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 9. row ***************************</span><br><span class="line">      Engine: CSV</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: CSV storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h3 id="MyISAM存储引擎"><a href="#MyISAM存储引擎" class="headerlink" title="MyISAM存储引擎"></a>MyISAM存储引擎</h3><ul>
<li>MyISAM存储引擎是MySQL最常用的引擎。但是这种引擎不是默认的。</li>
<li>MyISAM存储引擎不支持事务。</li>
<li>它管理的表具有以下特征：<ol>
<li>使用三个文件表示每张表<ul>
<li>格式文件 - 存储表结构的定义（mytable.frm）</li>
<li>数据文件 - 存储表行的内容（mytable.MYD）</li>
<li>索引文件 - 存储表上索引（mytable.MYI）</li>
</ul>
</li>
<li>灵活的 <strong>AUTO_INCREMENT</strong> 字段处理。</li>
<li>可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。</li>
</ol>
</li>
</ul>
<h3 id="InnoDB存储引擎"><a href="#InnoDB存储引擎" class="headerlink" title="InnoDB存储引擎"></a>InnoDB存储引擎</h3><ul>
<li>InnoDB存储引擎是MySQL的缺省引擎。</li>
<li>它管理的表具有下列主要特征：<ol>
<li>每个InnoDB表在数据库目录中以<code>.frm</code>格式文件表示</li>
<li>InnoDB表空间tablespace被用于存储表的内容，tablespace只是一个逻辑概念，他不是一个具体的文件</li>
<li>提供一组用来记录事务性活动的日志文件</li>
<li>用<strong>COMMIT（提交）</strong>、<strong>SAVEPOINT</strong>及<strong>ROLLBACK（回滚）</strong>支持事务处理</li>
<li>提供全ACID兼容</li>
<li>在MySQL服务器崩溃后提供自动恢复</li>
<li>多版本（MVCC）和行级锁定</li>
<li>支持外键及引用的完整性，包括级联删除和更新。</li>
</ol>
</li>
</ul>
<blockquote>
<p>支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。</p>
</blockquote>
<h3 id="MEMORY-存储引擎"><a href="#MEMORY-存储引擎" class="headerlink" title="MEMORY 存储引擎"></a>MEMORY 存储引擎</h3><ul>
<li>使用MEMORY存储引擎的表，其数据存在内存中，且行的长度固定，这两个特点使得MEMORY存储引擎非常快。</li>
<li>不支持事务且数据容易丢失，因为所有数据和索引都是存储在内存当中。查询速度最快。以前叫HEPA引擎。</li>
<li>在数据库目录内，每个表均以<code>.frm</code>格式的文件表示。</li>
<li>支持表级锁机制</li>
<li>不能存储BLOB字段和TEXT字段</li>
</ul>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>事务英语单词：Transaction</p>
<h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p>一个事务是一个完整的业务逻辑单元，不可再分。<br>比如：银行账户转账，从A账户向B账户转账10000。需要执行两条update语句。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> t_act <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">10000</span> <span class="keyword">where</span> actno <span class="operator">=</span> <span class="string">&#x27;act-001&#x27;</span>;</span><br><span class="line"><span class="keyword">update</span> t_act <span class="keyword">set</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">10000</span> <span class="keyword">where</span> actno <span class="operator">=</span> <span class="string">&#x27;act-002&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。要想保证以上的两条DML语句同时成功或者同时失败，那么就需要使用数据库的“事务机制”。</p>
<blockquote>
<p>和事务相关的语句只有：DML语句。因为DML语句都是和数据库当中的“数据”相关的。事务的存在是为了保证数据的完整性、安全性。</p>
</blockquote>
<p>假设所有的业务都能用一条DML语句搞定，这种情况是不需要事务。但实际情况是一个“需求（事务）”需要多条DML语句共同联合完成。</p>
<h2 id="事务原理"><a href="#事务原理" class="headerlink" title="事务原理"></a>事务原理</h2><p>假设有一个业务，需要先执行一条insert，再执行update，最后执行一条delete，这个业务才算完成。</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">开启事务机制(开始)：</span><br><span class="line"></span><br><span class="line">执行insert语句 -- &gt; insert...（这条DML语句执行成功之后，把执行记录到数据库的操作历史当中，并不会向文件中保存一条数据，不会真正的修改硬盘上的数据。）</span><br><span class="line"></span><br><span class="line">执行update语句 -- &gt; update...（记录历史操作，不会真正修改硬盘上的数据）</span><br><span class="line"></span><br><span class="line">执行delete语句 -- &gt; delete..（这个执行也是记录历史操作「记录到缓存」，不会修改硬盘上的数据）</span><br><span class="line"></span><br><span class="line">提交事务或回滚(结束)</span><br></pre></td></tr></table></figure>

<p>无论是回滚还是提交事务，都会将历史记录给抹除掉，区别在于提交事务后是将硬盘上的数据真正的修改。</p>
<h2 id="事务的四大特性"><a href="#事务的四大特性" class="headerlink" title="事务的四大特性"></a>事务的四大特性</h2><p>事务包括四大特性：ACID</p>
<ul>
<li><p>A<br>原子性：事务是最小的工作单元，不可再分。</p>
</li>
<li><p>C<br>一致性：事务必须保证多条DML语句同时成功或者同时失败</p>
</li>
<li><p>I<br>隔离性：事务A与事务B之间具有隔离。</p>
</li>
<li><p>D</p>
<p>持久性：持久性说的是最终数据必须持久化到硬盘文件中，事务才算成功的结束。</p>
</li>
</ul>
<h3 id="事务之间的隔离性"><a href="#事务之间的隔离性" class="headerlink" title="事务之间的隔离性"></a>事务之间的隔离性</h3><p>事务隔离性存在隔离级别，理论上隔离级别包括4个：</p>
<ul>
<li><p>第一级别<br>读未提交（read uncommitted）：对方事务还未提交，我们当前事务可以读取到对方未提交的数据。读未提交存在脏读现象（Dirty Read）现象：表示读到了脏的数据「数据不稳定」。</p>
</li>
<li><p>第二级别<br>读已提交（read committed）：对方事务提交之后的数据我方可以读取到。读已提交存在的问题是：不可重复读。</p>
<p>这种隔离级别解决了脏读问题</p>
</li>
<li><p>第三级别<br>可重复读（repeatable read）：这种隔离级别解决了：不可重复读问题。<br>这种隔离级别存在的问题是：读取到的数据是幻象。</p>
</li>
<li><p>第四级别：<br>序列化读、串行化读，解决了所有问题，效率低，需要排队。</p>
</li>
</ul>
<blockquote>
<p>Oracle数据库默认的隔离级别是：读已提交。</p>
<p>MySQL数据库默认的隔离级别是：可重复读。</p>
</blockquote>
<h2 id="演示事务"><a href="#演示事务" class="headerlink" title="演示事务"></a>演示事务</h2><p>MySQL中默认情况下是自动提交的。（只要执行任意一条DML语句就提交一次。）</p>
<p>使用<code>start transaction </code>可关闭自动提交。</p>
<h3 id="准备表"><a href="#准备表" class="headerlink" title="准备表"></a><strong>准备表</strong></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  user_name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br><span class="line">| Field     | Type         | Null | Key | Default | Extra          |</span><br><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br><span class="line">| id        | int          | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| user_name | varchar(255) | YES  |     | NULL    |                |</span><br><span class="line">+-----------+--------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure>



<h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a><strong>演示</strong></h3><p>插入一条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(user_name) <span class="keyword">values</span>(<span class="string">&#x27;UpYou&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>事务回滚操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<p>再查询回滚之后的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+-----------+</span><br><span class="line">| id | user_name |</span><br><span class="line">+----+-----------+</span><br><span class="line">|  1 | UpYou     |</span><br><span class="line">+----+-----------+</span><br></pre></td></tr></table></figure>

<p>发现数据没有回滚，这说明了MySQL已经默认提交了事务。关闭自动提交机制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br></pre></td></tr></table></figure>

<p>再插入一条数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(user_name) <span class="keyword">values</span>(<span class="string">&#x27;uncommitted&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+</span><br><span class="line">| id | user_name   |</span><br><span class="line">+----+-------------+</span><br><span class="line">|  1 | UpYou       |</span><br><span class="line">|  2 | uncommitted |</span><br><span class="line">+----+-------------+</span><br></pre></td></tr></table></figure>

<p>回滚事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<p>再查询回滚之后的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+-----------+</span><br><span class="line">| id | user_name |</span><br><span class="line">+----+-----------+</span><br><span class="line">|  1 | UpYou     |</span><br><span class="line">+----+-----------+</span><br></pre></td></tr></table></figure>

<p>无论是rollback还是committed之后，事务无论如何都是结束了。此时需要重新开启事务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br></pre></td></tr></table></figure>

<p>插入数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_user(user_name) <span class="keyword">values</span>(<span class="string">&#x27;UpYou那个并不存在的妹妹！&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------------------------------+</span><br><span class="line">| id | user_name                           |</span><br><span class="line">+----+-------------------------------------+</span><br><span class="line">|  1 | UpYou                               |</span><br><span class="line">|  3 | UpYou那个并不存在的妹妹！              |</span><br><span class="line">+----+-------------------------------------+</span><br></pre></td></tr></table></figure>

<p>提交事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit;</span><br></pre></td></tr></table></figure>

<p>再尝试回滚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------------------------------+</span><br><span class="line">| id | user_name                           |</span><br><span class="line">+----+-------------------------------------+</span><br><span class="line">|  1 | UpYou                               |</span><br><span class="line">|  3 | UpYou那个并不存在的妹妹！           		|</span><br><span class="line">+----+-------------------------------------+</span><br></pre></td></tr></table></figure>







<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><h2 id="什么是索引？有什么用？"><a href="#什么是索引？有什么用？" class="headerlink" title="什么是索引？有什么用？"></a>什么是索引？有什么用？</h2><p>索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。在数据库方面，查询一张表的时候，有两种检索方式：</p>
<ul>
<li>第一种是：全表扫描</li>
<li>第二种方式是<strong>根据索引检索（效率很高）</strong></li>
</ul>
<p>索引为什么可以提高检索效率呢？其实最根本的原理是缩小了扫描的范围。索引虽然可以提高索引效率，但是不能随意添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。比如：<br>表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。</p>
<blockquote>
<p>添加索引是给某一个字段或者说某些字段添加索引。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>当ename字段上没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。</p>
<p>当ename字段上添加索引的时候，以上sql语句会根据索引扫描，快速定位。</p>
<h2 id="什么时候考虑给字段添加索引？"><a href="#什么时候考虑给字段添加索引？" class="headerlink" title="什么时候考虑给字段添加索引？"></a>什么时候考虑给字段添加索引？</h2><ul>
<li>当数据量庞大的时候。（根据客户需求，根据线上环境）</li>
<li>该字段很少的DML操作。</li>
<li>该字段经常出现在where子句中。（经常根据哪个字段查询）</li>
</ul>
<p><strong>主键和具有unique约束的字段自动会添加索引。根据主键查询效率较高。</strong></p>
<h2 id="添加索引"><a href="#添加索引" class="headerlink" title="添加索引"></a>添加索引</h2><p>语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index 索引名 on 表名(字段名);</span><br></pre></td></tr></table></figure>



<p>使用<code>explain</code>关键字查看一条查询语句的执行计划。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from emp where sal = 5000;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">|  1 | SIMPLE      | emp   | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   14 |    10.00 | Using where |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br></pre></td></tr></table></figure>

<p>结果中有个<code>type</code>字段，他的值是<code>ALL</code>这意味着它将全表扫描，<code>rows</code>是扫描次数。自己给薪资<code>sal</code>字段添加索引。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index EMP_SAL_INDEX on emp(sal);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from emp where sal = 5000;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+-------+------------+------+---------------+---------------+---------+-------+------+----------+-------+</span><br><span class="line">| id | select_type | table | partitions | type | possible_keys | key           | key_len | ref   | rows | filtered | Extra |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+---------------+---------+-------+------+----------+-------+</span><br><span class="line">|  1 | SIMPLE      | emp   | NULL       | ref  | EMP_SAL_INDEX | EMP_SAL_INDEX | 9       | const |    1 |   100.00 | NULL  |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+---------------+---------+-------+------+----------+-------+</span><br></pre></td></tr></table></figure>

<p>这次通过索引去检索时，检索的次数只检索了1次</p>
<h2 id="删除索引兑现"><a href="#删除索引兑现" class="headerlink" title="删除索引兑现"></a>删除索引兑现</h2><p>语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index 索引名 on 表名;</span><br></pre></td></tr></table></figure>

<p>删除刚刚创建的索引</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index EMP_SAL_INDEX on emp;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain select * from emp where sal = 5000;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br><span class="line">|  1 | SIMPLE      | emp   | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   14 |    10.00 | Using where |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span><br></pre></td></tr></table></figure>



<h2 id="索引实现原理"><a href="#索引实现原理" class="headerlink" title="索引实现原理"></a>索引实现原理</h2><p>索引底层采用的数据结构是：B + Tree;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>当ename字段上没有索引的时候，会进行全表扫描，效率较低。给ename字段添加索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create index EMP_SAL_INDEX on emp(ename);</span><br></pre></td></tr></table></figure>

<p>以上sql语句执行的时候，会在内存或者硬盘文件当中生成一个索引，到底是在硬盘还是内存，得看你存储引擎。底层索引进行了排序、分区，索引会携带数据在表中的“物理地址”，最终通过索引检索到数据之后，获取到关联的物理地址，通过物理地址定位到表中的数据，效率是最高的。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>以上sql语句会通过索引转换为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> 物理地址 <span class="operator">=</span> <span class="number">0x3</span>;</span><br></pre></td></tr></table></figure>



<h2 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h2><ol>
<li>单一索引<br>给单个字段添加索引</li>
<li>复合索引<br>给多个字段联合起来添加1个索引</li>
<li>主键索引<br>主键上会自动添加索引</li>
<li>唯一索引<br>有unique约束的字段上会自动添加索引。</li>
</ol>
<h2 id="索引什么时候失效？"><a href="#索引什么时候失效？" class="headerlink" title="索引什么时候失效？"></a>索引什么时候失效？</h2><p>当遇到以下sql语句的时候，sql语句不会走索引</p>
<p>因为索引是通过第一个字母在字典中查找，而以下sql根本不知道第一个字母是什么。无法定位。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%A%&#x27;</span>;</span><br></pre></td></tr></table></figure>







<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h2 id="什么是视图？"><a href="#什么是视图？" class="headerlink" title="什么是视图？"></a>什么是视图？</h2><p>视图就是：站在不同的角度去看数据。（同一张表的数据，通过不同的角度去看待）。</p>
<h2 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h2><p>语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create view 视图名 as DQL语句。</span><br></pre></td></tr></table></figure>




<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create view myview as select empno, enmae from emp;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>只有DQL语句才能以视图对象的方式创建。</p>
</blockquote>
<h2 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h2><p>语法格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view 视图名称;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view myview;</span><br></pre></td></tr></table></figure>



<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>对视图进行增删改查，会影响到原表数据。（通过视图影响原表数据的，不是直接操作原表），可以对视图进行CRUD操作</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myview;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+-------+--------+</span><br><span class="line">| empno | ename  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7369 | SMITH  |</span><br><span class="line">|  7499 | ALLEN  |</span><br><span class="line">|  7521 | WARD   |</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">...</span><br><span class="line">+-------+--------+</span><br><span class="line">14 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<hr>
<p>拷贝一个备用表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE EMP_BAK AS SELECT * FROM EMP;</span><br></pre></td></tr></table></figure>

<p>创建这个表的视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW EMP_BAK_VIEW AS SELECT * FROM EMP_BAK;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME, EMPNO <span class="keyword">FROM</span> EMP_BAK_VIEW;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+--------+-------+</span><br><span class="line">| ENAME  | EMPNO |</span><br><span class="line">+--------+-------+</span><br><span class="line">| SMITH  |  7369 |</span><br><span class="line">| ALLEN  |  7499 |</span><br><span class="line">| WARD   |  7521 |</span><br><span class="line">| BLAKE  |  7698 |</span><br><span class="line">...</span><br><span class="line">+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>更新视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> EMP_BAK_VIEW <span class="keyword">SET</span> ENAME <span class="operator">=</span> <span class="string">&#x27;UpYou&#x27;</span> <span class="keyword">WHERE</span> EMPNO <span class="operator">=</span> <span class="number">7369</span>;</span><br></pre></td></tr></table></figure>

<p>查看视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME, EMPNO <span class="keyword">FROM</span> EMP_BAK_VIEW;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+--------+-------+</span><br><span class="line">| ENAME  | EMPNO |</span><br><span class="line">+--------+-------+</span><br><span class="line">| UpYou  |  7369 |</span><br><span class="line">| ALLEN  |  7499 |</span><br><span class="line">| WARD   |  7521 |</span><br><span class="line">| BLAKE  |  7698 |</span><br><span class="line">...</span><br><span class="line">+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>以上操作都是对视图进行修改，并没有对原表进行修改，查询一下原表的数据是否受到影响</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME, DEPTNO <span class="keyword">FROM</span> EMP_BAK;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| ENAME  | DEPTNO |</span><br><span class="line">+--------+--------+</span><br><span class="line">| UpYou  |     20 |</span><br><span class="line">| ALLEN  |     30 |</span><br><span class="line">| WARD   |     30 |</span><br><span class="line">...</span><br><span class="line">+--------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>



<h2 id="视图的作用"><a href="#视图的作用" class="headerlink" title="视图的作用"></a>视图的作用</h2><p>视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供视图，程序员只对视图CRUD。</p>
<h1 id="DBA命令"><a href="#DBA命令" class="headerlink" title="DBA命令"></a>DBA命令</h1><h2 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h2><p>在dos命令窗口中执行</p>
<p>导出整个数据库语法格式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump 数据库名<span class="operator">&gt;</span>输出路劲 <span class="operator">-</span>uroot <span class="operator">-</span>p数据库密码</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump upyou_database <span class="operator">&gt;</span>  <span class="operator">/</span>Users<span class="operator">/</span>yct<span class="operator">/</span>Desktop<span class="operator">/</span>upyou_database_bak.sql <span class="operator">-</span>uroot <span class="operator">-</span>p123456;</span><br></pre></td></tr></table></figure>



<p>导出指定表语法格式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump 数据库名 表名&gt;路径 -uroot -p数据库密码</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump upyou_database emp &gt;  /Users/yct/Desktop/upyou_database_bak.sql -uroot -p123456;</span><br></pre></td></tr></table></figure>



<h2 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h2><p>若想要导入数据，那么你的数据库必须存在：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database upyou_database;</span><br></pre></td></tr></table></figure>

<p>使用这个数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use upyou_database;</span><br></pre></td></tr></table></figure>

<p>导入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /Users/yct/Desktop/upyou_database_bak.sql;</span><br></pre></td></tr></table></figure>





<h1 id="数据库三范式"><a href="#数据库三范式" class="headerlink" title="数据库三范式"></a>数据库三范式</h1><h2 id="什么是设计范式"><a href="#什么是设计范式" class="headerlink" title="什么是设计范式"></a>什么是设计范式</h2><p>设计表的依据。按照这个三范式设计的表不会出现数据冗余。</p>
<h2 id="三范式都是哪些？"><a href="#三范式都是哪些？" class="headerlink" title="三范式都是哪些？"></a>三范式都是哪些？</h2><ol>
<li><p>第一范式</p>
<p>任何一张表都应该有主键，并且每一个字段原子性不可再分。</p>
</li>
<li><p>第二范式</p>
<p>第二范式建立在第一范式的基础之上，所有非主键字段必须完全依赖主键，不能产生部分依赖。（多对多三张表一个关系两个外键）</p>
</li>
<li><p>第三范式<br>建立在第二范式的基础之上，所有非主键字段直接依赖主键，不能产生传递依赖。（一对多，两张表，多的表加外键）</p>
</li>
</ol>
<blockquote>
<p>实际开发中，以满足业务需求为主，有时会拿冗余换执行速度。</p>
</blockquote>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/about/">关于</a></li>
        
          <li><a href="/archives/">归档</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E3%80%81DB%E3%80%81DBMS%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BB%96%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">SQL、DB、DBMS分别是什么，他们之间的关系？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">什么是表</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">对SQL语句的分类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">MySQL命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.1.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">4.2.</span> <span class="toc-text">查看表结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.3.</span> <span class="toc-text">查询当前使用的数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8BMySQL%E6%9C%AC%E5%8F%B7"><span class="toc-number">4.4.</span> <span class="toc-text">查看MySQL本号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.5.</span> <span class="toc-text">结束一条语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E8%AF%AD%E5%8F%A5%EF%BC%9A"><span class="toc-number">4.6.</span> <span class="toc-text">查看创建表的语句：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">5.</span> <span class="toc-text">SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%84%9A%E6%9C%AC"><span class="toc-number">5.1.</span> <span class="toc-text">SQL脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">5.2.</span> <span class="toc-text">查看表格中的数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%EF%BC%88DQL%EF%BC%89"><span class="toc-number">5.3.</span> <span class="toc-text">简单的查询语句（DQL）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">5.3.1.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">5.3.2.</span> <span class="toc-text">查询所有字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.</span> <span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#between-and"><span class="toc-number">5.4.1.</span> <span class="toc-text">between and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-null-%E5%92%8C-is-not-null"><span class="toc-number">5.4.2.</span> <span class="toc-text">is null 和 is not null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#or%E5%92%8Cand%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E9%97%AE%E9%A2%98"><span class="toc-number">5.4.3.</span> <span class="toc-text">or和and的优先级问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in"><span class="toc-number">5.4.4.</span> <span class="toc-text">in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-in"><span class="toc-number">5.4.5.</span> <span class="toc-text">not in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like"><span class="toc-number">5.4.6.</span> <span class="toc-text">模糊查询like</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E5%90%8D%E5%AD%97%E5%BD%93%E4%B8%AD%E5%90%AB%E6%9C%89O%E7%9A%84%EF%BC%9F"><span class="toc-number">5.4.6.1.</span> <span class="toc-text">找出名字当中含有O的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E5%90%8D%E5%AD%97%E4%B8%AD%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%AD%97%E6%AF%8D%E6%98%AFA%E7%9A%84%EF%BC%9F"><span class="toc-number">5.4.6.2.</span> <span class="toc-text">找出名字中第二个字母是A的？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">5.5.</span> <span class="toc-text">排序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%8C%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">6.0.1.</span> <span class="toc-text">多行处理函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%A4%84%E7%90%86%E8%A1%8C%E6%95%B0"><span class="toc-number">6.0.2.</span> <span class="toc-text">单行处理行数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.0.3.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">6.0.4.</span> <span class="toc-text">去除重复记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84DQL%E8%AF%AD%E5%8F%A5%E6%80%8E%E4%B9%88%E5%86%99%E4%BB%A5%E5%8F%8A%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">6.0.5.</span> <span class="toc-text">一个完整的DQL语句怎么写以及执行顺序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%9F"><span class="toc-number">7.1.</span> <span class="toc-text">什么是连接查询？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">7.1.1.</span> <span class="toc-text">连接查询的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1"><span class="toc-number">7.1.2.</span> <span class="toc-text">笛卡尔积现象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E8%A1%A8%E7%9A%84%E5%88%AB%E5%90%8D"><span class="toc-number">7.1.3.</span> <span class="toc-text">关于表的别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%88%AB%E5%90%8D%E6%9C%89%E4%BB%80%E4%B9%88%E5%A5%BD%E5%A4%84%EF%BC%9F"><span class="toc-number">7.1.3.1.</span> <span class="toc-text">表的别名有什么好处？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1%EF%BC%9F"><span class="toc-number">7.1.4.</span> <span class="toc-text">如何避免笛卡尔积现象？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.</span> <span class="toc-text">内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.1.</span> <span class="toc-text">等值连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL92"><span class="toc-number">7.2.2.</span> <span class="toc-text">SQL92</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL99"><span class="toc-number">7.2.3.</span> <span class="toc-text">SQL99</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.4.</span> <span class="toc-text">非等值连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.5.</span> <span class="toc-text">自连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.3.2.</span> <span class="toc-text">右外连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%BC%A0%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.3.3.</span> <span class="toc-text">三张表连接查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%9F"><span class="toc-number">8.1.</span> <span class="toc-text">什么是子查询？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.2.</span> <span class="toc-text">在where语句中使用子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8select%E5%90%8E%E9%9D%A2%E5%B5%8C%E5%A5%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.3.</span> <span class="toc-text">在select后面嵌套子查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#union%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">union的用法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#limit"><span class="toc-number">10.</span> <span class="toc-text">limit</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">11.</span> <span class="toc-text">表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EMySQL%E5%BD%93%E4%B8%AD%E5%B8%B8%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%82"><span class="toc-number">11.1.</span> <span class="toc-text">关于MySQL当中常用字段的数据类型。</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#char%E5%92%8Cvarchar%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%EF%BC%9F"><span class="toc-number">11.1.1.</span> <span class="toc-text">char和varchar如何选择？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8"><span class="toc-number">11.1.2.</span> <span class="toc-text">建表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%E8%AF%AD%E5%8F%A5%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">11.2.</span> <span class="toc-text">insert语句插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6%E4%BB%A5%E5%8F%8A%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">11.2.1.</span> <span class="toc-text">表的复制以及批量插入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="toc-number">11.2.1.1.</span> <span class="toc-text">表的复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5"><span class="toc-number">11.2.1.2.</span> <span class="toc-text">批量插入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">11.3.</span> <span class="toc-text">定义默认值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">11.4.</span> <span class="toc-text">update 修改数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">11.5.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.</span> <span class="toc-text">表约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F%EF%BC%9F"><span class="toc-number">11.6.1.</span> <span class="toc-text">什么是约束？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.2.</span> <span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.3.</span> <span class="toc-text">唯一性约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.4.</span> <span class="toc-text">主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD"><span class="toc-number">11.6.4.1.</span> <span class="toc-text">主键相关术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">11.6.4.2.</span> <span class="toc-text">主键有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">11.6.4.3.</span> <span class="toc-text">主键的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E5%80%BC%E8%87%AA%E5%A2%9E"><span class="toc-number">11.6.4.4.</span> <span class="toc-text">主键值自增</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">11.6.5.</span> <span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E8%83%8C%E6%99%AF"><span class="toc-number">11.6.5.1.</span> <span class="toc-text">业务背景</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.</span> <span class="toc-text">存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.1.</span> <span class="toc-text">什么是存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.2.</span> <span class="toc-text">查看存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.</span> <span class="toc-text">常见的存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyISAM%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.1.</span> <span class="toc-text">MyISAM存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.2.</span> <span class="toc-text">InnoDB存储引擎</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MEMORY-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">12.3.3.</span> <span class="toc-text">MEMORY 存储引擎</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.1.</span> <span class="toc-text">什么是事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%8E%9F%E7%90%86"><span class="toc-number">13.2.</span> <span class="toc-text">事务原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-number">13.3.</span> <span class="toc-text">事务的四大特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7"><span class="toc-number">13.3.1.</span> <span class="toc-text">事务之间的隔离性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E4%BA%8B%E5%8A%A1"><span class="toc-number">13.4.</span> <span class="toc-text">演示事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E8%A1%A8"><span class="toc-number">13.4.1.</span> <span class="toc-text">准备表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA"><span class="toc-number">13.4.2.</span> <span class="toc-text">演示</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">14.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">14.1.</span> <span class="toc-text">什么是索引？有什么用？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%80%83%E8%99%91%E7%BB%99%E5%AD%97%E6%AE%B5%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="toc-number">14.2.</span> <span class="toc-text">什么时候考虑给字段添加索引？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="toc-number">14.3.</span> <span class="toc-text">添加索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%E5%85%91%E7%8E%B0"><span class="toc-number">14.4.</span> <span class="toc-text">删除索引兑现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">14.5.</span> <span class="toc-text">索引实现原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">14.6.</span> <span class="toc-text">索引的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%A4%B1%E6%95%88%EF%BC%9F"><span class="toc-number">14.7.</span> <span class="toc-text">索引什么时候失效？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">15.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE%EF%BC%9F"><span class="toc-number">15.1.</span> <span class="toc-text">什么是视图？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">15.2.</span> <span class="toc-text">视图的创建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">15.3.</span> <span class="toc-text">删除视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">15.4.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">15.5.</span> <span class="toc-text">视图的作用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DBA%E5%91%BD%E4%BB%A4"><span class="toc-number">16.</span> <span class="toc-text">DBA命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">16.1.</span> <span class="toc-text">导出数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">16.2.</span> <span class="toc-text">导入数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">17.</span> <span class="toc-text">数据库三范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F"><span class="toc-number">17.1.</span> <span class="toc-text">什么是设计范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F%E9%83%BD%E6%98%AF%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">17.2.</span> <span class="toc-text">三范式都是哪些？</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&text=MySQL学习笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&is_video=false&description=MySQL学习笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=MySQL学习笔记&body=Check out this article: http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&title=MySQL学习笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&name=MySQL学习笔记&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://www.ctong.top/2022/01/02/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/&t=MySQL学习笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2023
    Clover You
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
